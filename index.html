<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»¥å·±ä¸ºæ™¯-æƒ…ç»ªé¢å…·æ²‰æµ¸å¼è‰ºæœ¯å±•ç­–åˆ’æ–¹æ¡ˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap');

        /* æ›´æ–°æ ¹å˜é‡ */
        :root {
            --primary-orange: #ff9500;
            --primary-blue: #1a1ef9;
            --background-dark: #000;
            --text-color: #fff;
            --gradient-primary: linear-gradient(45deg, var(--primary-orange), var(--primary-blue));
            --shadow-glow: 0 0 20px rgba(255, 149, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* åŸºç¡€æ ·å¼ä¼˜åŒ– */
        body {
            background-color: var(--background-dark);
            color: var(--text-color);
            font-family: 'Noto Serif SC', serif;
            overflow: hidden;
            line-height: 1.6;
        }

        .room {
            position: fixed;
            width: 100vw;
            height: 100vh;
            top: 0;
            left: 0;
            opacity: 0;
            visibility: hidden;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
        }

        .room.active {
            opacity: 1;
            visibility: visible;
        }

        .room-title {
            position: absolute;
            top: 2rem;
            left: 2rem;
            font-size: 2rem;
            font-weight: bold;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.5s ease;
        }

        .room.active .room-title {
            opacity: 1;
            transform: translateY(0);
        }

        .room-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 80%;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        /* ä¸ºæƒ…ç»ªæˆ¿é—´ç‰¹åˆ«è®¾ç½®å…¨å±å†…å®¹ */
        #emotion-room .room-content {
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            transform: none;
        }

        .room.active .room-content {
            opacity: 1;
        }

        /* å¯¼èˆªæ ä¼˜åŒ– */
        .room-nav {
            position: fixed;
            top: 50%;
            right: 2rem;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            z-index: 1000;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            position: relative;
            width: 60px;
            height: 60px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-canvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .nav-item:hover .nav-canvas {
            transform: scale(1.2);
            border-color: var(--primary-orange);
            box-shadow: var(--shadow-glow);
        }

        .nav-item.active .nav-canvas {
            border-color: var(--primary-blue);
            box-shadow: 0 0 20px var(--primary-blue);
        }

        .nav-line {
            position: absolute;
            top: 0;
            left: 50%;
            width: 1px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary-orange), var(--primary-blue));
            opacity: 0.3;
            transform: translateX(-50%);
        }

        .nav-line::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary-orange), var(--primary-blue));
            filter: blur(5px);
            opacity: 0.5;
        }

        @keyframes navPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.3;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0.2;
            }
        }

        @keyframes navGlow {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 0 20px var(--primary-blue);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                box-shadow: 0 0 30px var(--primary-blue);
            }
        }

        .nav-point[data-room="infinity"] { top: 20%; left: 50%; }
        .nav-point[data-room="bubble"] { top: 50%; left: 80%; }
        .nav-point[data-room="nails"] { top: 80%; left: 50%; }
        .nav-point[data-room="emotion"] { top: 50%; left: 20%; }
        .nav-point[data-room="pendulum"] { top: 50%; left: 50%; }

        .nav-line.active {
            background: linear-gradient(90deg, var(--primary-orange), var(--primary-blue));
            height: 2px;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }

        .nav-line.active::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-orange), var(--primary-blue));
            transform: translateY(-50%);
            filter: blur(10px);
            opacity: 0.5;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            20% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        .nav-point:hover {
            animation: float 2s ease-in-out infinite;
        }

        .nav-point.active {
            animation: none;
        }

        /* æ— é™æˆ¿é—´ */
        .infinity-room {
            background: linear-gradient(45deg, #000 0%, #1a1a1a 100%);
        }

        .infinity-content {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .infinity-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: grayscale(50%) contrast(120%);
            clip-path: polygon(0 0, 100% 0, 100% 85%, 85% 100%, 0 100%);
        }

        .video-controls {
            position: absolute;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 10;
            background: rgba(0, 0, 0, 0.5);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #fff;
        }

        .volume-slider {
            width: 100px;
            height: 4px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .volume-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .volume-icon {
            cursor: pointer;
            font-size: 1.2rem;
            color: #fff;
            transition: all 0.3s ease;
        }

        .volume-icon:hover {
            color: var(--primary-orange);
        }

        /* æ³¡æ³¡æˆ¿é—´ */
        .bubble-room {
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            overflow: hidden;
            position: relative;
        }
        
        /* æ³¡æ³¡äº§ç”Ÿç‚¹çš„è§†è§‰æ•ˆæœ */
        .bubble-room::after {
            content: '';
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, 
                rgba(255, 255, 255, 0.4) 0%, 
                rgba(255, 255, 255, 0.1) 60%, 
                transparent 80%);
            border-radius: 50%;
            filter: blur(5px);
            pointer-events: none;
            animation: bubbleSource 3s infinite alternate;
        }
        
        @keyframes bubbleSource {
            0% {
                opacity: 0.7;
                transform: translateX(-50%) scale(0.8);
            }
            100% {
                opacity: 0.9;
                transform: translateX(-50%) scale(1.1);
            }
        }

        .bubble {
            position: absolute;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, 
                rgba(255, 255, 255, 0.3), 
                rgba(255, 255, 255, 0.05) 70%,
                rgba(255, 255, 255, 0.02) 100%);
            backdrop-filter: blur(3px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            overflow: hidden;
            transition: all 0.5s ease;
            transform: rotate(var(--rotation));
            box-shadow: 
                inset 0 0 15px rgba(255, 255, 255, 0.2),
                inset 5px -5px 20px rgba(255, 255, 255, 0.1),
                0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* æ·»åŠ æ³¡æ³¡åå…‰æ•ˆæœ */
        .bubble::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 15%;
            width: 20%;
            height: 20%;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            filter: blur(3px);
        }

        .bubble::after {
            content: '';
            position: absolute;
            top: 30%;
            left: 25%;
            width: 10%;
            height: 10%;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            filter: blur(1px);
        }

        .bubble img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.8;
            transition: opacity 0.5s ease, filter 0.5s ease;
            filter: grayscale(20%) contrast(110%) brightness(0.9);
            mix-blend-mode: soft-light;
        }

        .bubble:hover {
            /* åªåŠ è§†è§‰æ•ˆæœï¼Œä¸å†ç›´æ¥transformï¼Œé¿å…ä¸GSAPå†²çª */
            z-index: 10;
            box-shadow: 
                inset 0 0 30px rgba(255, 255, 255, 0.3),
                inset 10px -10px 30px rgba(255, 255, 255, 0.15),
                0 8px 25px rgba(0, 0, 0, 0.4);
            border-color: rgba(255, 255, 255, 0.6);
            transition: box-shadow 0.3s, border-color 0.3s;
        }

        .bubble:hover img {
            opacity: 1;
            filter: grayscale(0%) contrast(110%) brightness(1.05);
            mix-blend-mode: normal;
        }

        /* é’‰å­æˆ¿é—´ */
        .nails-room {
            background: linear-gradient(45deg, #000 0%, #1a1a1a 100%);
            overflow: hidden;
        }

        .image-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .main-image:hover {
            transform: scale(1.02);
        }

        /* æƒ…ç»ªæˆ¿é—´ */
        .emotion-room {
            background: #000;
        }

        .emotion-dialog {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            border-radius: 0;
            border: none;
            backdrop-filter: none;
            box-shadow: none;
            overflow: hidden;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emotion-dialog-container {
            display: none;
            flex-direction: column;
            padding: 3rem 4rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            height: 100%;
        }

        .emotion-dialog-container.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .dialog-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4rem;
            border-bottom: none;
            padding-bottom: 0;
            position: relative;
        }

        .dialog-header h2 {
            margin: 0;
            font-size: 2.8rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.9);
            letter-spacing: 2px;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .back-button {
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0.7rem 0;
            border-radius: 0;
            letter-spacing: 2px;
        }

        .back-button:hover {
            background: transparent;
            color: rgba(255, 255, 255, 0.9);
            transform: translateX(-3px);
        }

        .dialog-content {
            margin-bottom: 3rem;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.3rem;
            /* å¯¹è¯æ¡†å†…å®¹åŒºæ ·å¼å¢å¼º */
            padding: 0;
            background: transparent;
            border-radius: 0;
            border: none;
            flex-grow: 1;
            overflow-y: auto;
            max-height: calc(100% - 200px);
        }
        
        /* å¯¹è¯æ°”æ³¡æ•ˆæœ - æç®€ç‰ˆ */
        .dialog-content p {
            position: relative;
            background: rgba(30, 30, 30, 0.15);
            padding: 2.2rem 2.5rem;
            border-radius: 0;
            margin: 0;
            box-shadow: none;
            font-size: 1.6rem;
            line-height: 1.7;
            letter-spacing: 0.5px;
        }

        .dialog-options {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 1.2rem;
            position: relative;
            padding-top: 0.7rem;
            margin-top: auto;
        }
        
        /* æ·»åŠ å¯¹è¯é€‰é¡¹æç¤º - æ›´åŠ è½»é‡ */
        .dialog-options::before {
            content: 'é€‰æ‹©';
            position: absolute;
            top: -1.5rem;
            left: 0;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.4);
            letter-spacing: 3px;
            text-transform: uppercase;
            font-weight: 300;
        }

        /* æ·»åŠ ç‚¹å‡»æ³¢çº¹æ•ˆæœ */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transform: translate(-50%, -50%);
            pointer-events: none;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        @keyframes ripple {
            0% {
                width: 0px;
                height: 0px;
                opacity: 0.5;
            }
            100% {
                width: 150px;
                height: 150px;
                opacity: 0;
            }
        }

        /* å¯¹è¯é€‰é¡¹æ‚¬åœå¢å¼ºæ•ˆæœ */
        .dialog-option {
            padding: 2rem 0.5rem;
            border: none;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            background: transparent;
            display: flex;
            align-items: center;
            gap: 2rem;
            /* æç®€é£æ ¼ */
            box-shadow: none;
            position: relative;
            padding-left: 5.5rem;
            margin-bottom: 0.5rem;
            overflow: hidden; /* ç¡®ä¿æ³¢çº¹æ•ˆæœä¸ä¼šæº¢å‡º */
        }

        .dialog-option:hover {
            background: rgba(255, 255, 255, 0.02);
            transform: translateY(-1px);
            box-shadow: none;
        }

        .dialog-option.selected {
            background: linear-gradient(45deg, rgba(255, 149, 0, 0.07), rgba(78, 205, 196, 0.07));
            box-shadow: none;
        }

        .option-icon {
            font-size: 2.2rem;
            position: absolute;
            left: 1rem;
            opacity: 0.9;
        }

        .option-text {
            font-size: 1.3rem;
            letter-spacing: 1px;
            opacity: 0.9;
        }

        /* ä¿®æ”¹ç»“æœåŠ¨ç”»æ ·å¼ */
        .result-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            opacity: 0;
            transition: opacity 1s ease;
            pointer-events: none;
            visibility: hidden;
        }

        .result-animation.active {
            opacity: 1;
            visibility: visible;
        }

        /* è°ƒæ•´ç»“æœç•Œé¢çš„å†…å®¹ï¼Œä½¿å…¶æ˜¾ç¤ºåœ¨åŠ¨ç”»ä¸Šæ–¹ */
        #resultDialog {
            position: relative;
            z-index: 10; /* ç¡®ä¿å¯¹è¯æ¡†åœ¨åŠ¨ç”»ä¸Šæ–¹ */
        }
        
        #resultDialog .dialog-content {
            position: relative;
            z-index: 10;
            background: rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(3px);
            border-radius: 0;
            box-shadow: none;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 0;
        }

        #resultDialog .dialog-header,
        #resultDialog .dialog-options {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }
        
        #resultDialog .dialog-header h2 {
            font-size: 3rem;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.95);
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        #resultDialog .dialog-content p {
            background: transparent;
            padding: 3rem 1rem;
            font-size: 1.7rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        /* æ·»åŠ å¤´åƒå›¾æ ‡ */
        .dialog-avatar {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, var(--primary-orange), var(--primary-blue));
            top: -25px;
            left: 25px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            z-index: 10;
        }

        /* å¢å¼ºæƒ…ç»ªç»“æœåŠ¨ç”»æ ·å¼ */
        .animation-workplace-real {
            background: linear-gradient(135deg, #ff4b4b, #ff8f8f);
            position: relative;
            overflow: hidden;
        }

        .animation-workplace-mask {
            background: linear-gradient(135deg, #4b7bff, #8fb3ff);
            position: relative;
            overflow: hidden;
        }

        .animation-relationship-real {
            background: linear-gradient(135deg, #ff9500, #ffcc80);
            position: relative;
            overflow: hidden;
        }

        .animation-relationship-mask {
            background: linear-gradient(135deg, #7b1fa2, #ce93d8);
            position: relative;
            overflow: hidden;
        }

        /* æ–°å¢å®¿èˆåœºæ™¯åŠ¨ç”»æ ·å¼ */
        .animation-dorm-real {
            background: linear-gradient(135deg, #e53935, #ff8a80);
            position: relative;
            overflow: hidden;
        }

        .animation-dorm-mask {
            background: linear-gradient(135deg, #43a047, #81c784);
            position: relative;
            overflow: hidden;
        }

        @keyframes fadeInBackground {
            from { background-position: 0% 0%; }
            to { background-position: 100% 100%; }
        }

        .animation-workplace-real::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: repeating-linear-gradient(
                45deg,
                rgba(255, 255, 255, 0.1),
                rgba(255, 255, 255, 0.1) 10px,
                rgba(255, 255, 255, 0.05) 10px,
                rgba(255, 255, 255, 0.05) 20px
            );
            animation: movePattern 20s linear infinite;
        }

        .animation-workplace-real::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at center,
                rgba(255, 255, 255, 0.2) 0%,
                transparent 70%
            );
            animation: pulse 4s ease-in-out infinite;
        }

        .animation-workplace-mask::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M0,50 L100,50 M50,0 L50,100" stroke="rgba(255,255,255,0.1)" stroke-width="2"/></svg>');
            background-size: 50px 50px;
            animation: rotate 30s linear infinite;
        }

        .animation-relationship-real::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at 50% 50%,
                rgba(255, 255, 255, 0.3),
                rgba(255, 255, 255, 0) 80%
            );
            animation: pulse 3s ease-in-out infinite;
        }

        .animation-relationship-real::after {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><circle cx="20" cy="20" r="15" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="2"/></svg>');
            background-size: 40px 40px;
            animation: rotate 60s linear infinite;
        }

        .animation-relationship-mask::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to right,
                rgba(255, 255, 255, 0.2),
                rgba(255, 255, 255, 0) 60%
            );
            animation: sweep 4s ease-in-out infinite alternate;
        }

        .animation-dorm-real::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-radial-gradient(
                circle at center,
                rgba(255, 255, 255, 0.1) 0px,
                rgba(255, 255, 255, 0.1) 10px,
                rgba(255, 255, 255, 0) 10px,
                rgba(255, 255, 255, 0) 20px
            );
            animation: pulse 2s ease-in-out infinite;
        }

        .animation-dorm-real::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 5px;
            background: linear-gradient(
                to right,
                rgba(255, 255, 255, 0),
                rgba(255, 255, 255, 0.5),
                rgba(255, 255, 255, 0)
            );
            animation: scan 3s ease-in-out infinite;
        }

        .animation-dorm-mask::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60"><path d="M30,0 L60,30 L30,60 L0,30 Z" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="2"/></svg>');
            background-size: 60px 60px;
            animation: rotate 40s linear infinite;
        }

        .animation-dorm-mask::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at center,
                rgba(255, 255, 255, 0.2) 0%,
                transparent 70%
            );
            animation: pulse 5s ease-in-out infinite;
        }

        /* æ–°å¢åŠ¨ç”»å…³é”®å¸§ */
        @keyframes scan {
            0% { top: 0; }
            50% { top: 100%; }
            100% { top: 0; }
        }

        @keyframes sweep {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes movePattern {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-50px, -50px); }
        }

        /* å¢å¼ºç²’å­æ•ˆæœ */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            animation: float 10s linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            20% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        .explore-more {
            text-align: center;
            background: linear-gradient(45deg, rgba(255, 149, 0, 0.2), rgba(78, 205, 196, 0.2));
            border: 1px solid var(--primary-blue);
            justify-content: center;
        }

        .explore-more:hover {
            background: linear-gradient(45deg, rgba(255, 149, 0, 0.4), rgba(78, 205, 196, 0.4));
        }

        /* ç§»é™¤æ—§çš„æƒ…ç»ªæ¨¡æ€æ¡†æ ·å¼ */
        .emotion-modal {
            display: none;
        }

        /* é’Ÿæ‘†æˆ¿é—´ */
        .pendulum-room {
            background: linear-gradient(45deg, #000 0%, #1a1a1a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .pendulum-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pendulum {
            position: relative;
            width: 3px;
            height: 600px;
            background: linear-gradient(to bottom, 
                rgba(255, 149, 0, 0.9),
                rgba(78, 205, 196, 0.9));
            transform-origin: top center;
            animation: swing 4s ease-in-out infinite;
            box-shadow: 
                0 0 30px rgba(255, 149, 0, 0.3),
                0 0 60px rgba(78, 205, 196, 0.2);
            z-index: 2;
        }

        .pendulum-bob {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 240px;
            height: 240px;
            border-radius: 50%;
            /* 3Dç«‹ä½“æ•ˆæœ */
            background: radial-gradient(circle at 70px 70px, rgba(255, 255, 255, 0.3), rgba(0, 0, 0, 0.2));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 0 60px rgba(255, 149, 0, 0.3),
                inset 0 0 60px rgba(78, 205, 196, 0.4),
                -20px 20px 60px rgba(0, 0, 0, 0.5); /* å¢å¼ºç«‹ä½“æ„Ÿçš„é˜´å½± */
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            z-index: 2;
            /* å¢åŠ åŠ¨ç”»æ•ˆæœ */
            animation: glow 3s ease-in-out infinite;
        }

        .pendulum-text {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffffff;
            text-shadow: 
                0 0 20px rgba(255, 149, 0, 0.9),
                0 0 40px rgba(78, 205, 196, 0.7),
                0 0 10px rgba(0, 0, 0, 0.5);
            font-weight: 500;
            font-size: 3rem;
            text-align: center;
            letter-spacing: 10px;
            line-height: 2;
            width: 500px;
            opacity: 1;
            transition: all 0.5s ease;
            z-index: 1;
            pointer-events: none;
            white-space: nowrap;
        }

        .pendulum-desc {
            position: absolute;
            left: 50%;
            bottom: 40px;
            transform: translateX(-50%);
            color: #ff9500;
            font-size: 1.4rem;
            letter-spacing: 4px;
            text-align: center;
            z-index: 1;
            opacity: 0.85;
            pointer-events: none;
        }

        @keyframes swing {
            0% {
                transform: rotate(-30deg);
            }
            50% {
                transform: rotate(30deg);
            }
            100% {
                transform: rotate(-30deg);
            }
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 
                    0 0 60px rgba(255, 149, 0, 0.3),
                    inset 0 0 60px rgba(78, 205, 196, 0.4),
                    -20px 20px 60px rgba(0, 0, 0, 0.5);
            }
            50% {
                box-shadow: 
                    0 0 80px rgba(255, 149, 0, 0.5),
                    inset 0 0 80px rgba(78, 205, 196, 0.6),
                    -20px 20px 80px rgba(0, 0, 0, 0.6);
            }
        }

        /* é¦–é¡µæ ·å¼ */
        .home-page {
            position: fixed;
            width: 100vw;
            height: 100vh;
            top: 0;
            left: 0;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .home-page.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .home-canvas {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 1200px;
            height: 1200px;
            z-index: 1;
        }

        .home-content {
            position: relative;
            z-index: 2;
            text-align: left;
            color: #fff;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.5s ease;
            position: absolute;
            bottom: 10%;
            right: 10%;
            transform: translateX(20px);
            width: 400px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.3);
        }

        .home-page.active .home-content {
            opacity: 1;
            transform: translateX(0);
        }

        .home-title {
            font-size: 3.5rem;
            margin-bottom: 2rem;
            letter-spacing: 6px;
            background: linear-gradient(45deg, var(--primary-orange), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(78, 205, 196, 0.3);
            line-height: 1.2;
            position: relative;
        }

        .home-title::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 0;
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-orange), var(--primary-blue));
        }

        .home-subtitle {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            color: rgba(255, 255, 255, 0.8);
            letter-spacing: 2px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
            line-height: 1.8;
            font-weight: 300;
        }

        .enter-button {
            padding: 1rem 3rem;
            font-size: 1.2rem;
            color: #fff;
            background: transparent;
            border: 2px solid var(--primary-orange);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.2);
            display: inline-block;
        }

        .enter-button::after {
            content: 'â†’';
            margin-left: 10px;
            transition: all 0.3s ease;
        }

        .enter-button:hover {
            background: var(--primary-orange);
            transform: translateY(-2px);
        }

        .enter-button:hover::after {
            transform: translateX(5px);
        }

        /* ç»˜ç”»æˆ¿é—´ */
        .drawing-room {
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            display: flex;
            flex-direction: column;
        }

        .drawing-canvas {
            position: relative;
            flex: 1;
            width: 100%;
            background: var(--background-dark);
            cursor: crosshair;
        }

        .drawing-controls {
            position: relative;
            margin: 2rem auto;
            display: flex;
            gap: 1rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 1rem;
            border-radius: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .color-picker {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            background: none;
            padding: 0;
        }

        .brush-size {
            width: 100px;
            height: 4px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
        }

        .brush-size::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .drawing-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .drawing-btn:hover {
            background: var(--primary-orange);
            border-color: var(--primary-orange);
        }

        .saved-drawings {
            position: fixed;
            top: 2rem;
            right: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .saved-drawing {
            width: 100px;
            height: 100px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .saved-drawing:hover {
            transform: scale(1.1);
            border-color: var(--primary-orange);
        }

        /* å°æ³¡æ³¡æ ·å¼ */
        .tiny-bubble {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, 
                rgba(255, 255, 255, 0.5), 
                rgba(255, 255, 255, 0.1) 70%);
            opacity: 0.7;
            backdrop-filter: blur(1px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            z-index: 1;
            box-shadow: 
                inset 0 0 5px rgba(255, 255, 255, 0.3),
                0 0 5px rgba(255, 255, 255, 0.1);
            pointer-events: none; /* é˜²æ­¢å¹²æ‰°äº¤äº’ */
        }
        
        /* å°æ³¡æ³¡åå…‰æ•ˆæœ */
        .tiny-bubble::before {
            content: '';
            position: absolute;
            top: 20%;
            left: 20%;
            width: 30%;
            height: 30%;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            filter: blur(1px);
        }
        
        /* ç©ºæ³¡æ³¡æ ·å¼ */
        .empty-bubble {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, 
                rgba(255, 255, 255, 0.05), 
                rgba(255, 255, 255, 0.02) 50%, 
                transparent 90%);
            border: 1.5px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.15);
            transition: all 0.5s ease;
            opacity: 0.5;
            pointer-events: none; /* é˜²æ­¢å¹²æ‰°äº¤äº’ */
        }
        
        /* ç©ºæ³¡æ³¡åå…‰æ•ˆæœ */
        .empty-bubble::before {
            content: '';
            position: absolute;
            top: 15%;
            left: 15%;
            width: 20%;
            height: 20%;
            border: 1px solid rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            filter: blur(1px);
        }
        
        /* ç©ºæ³¡æ³¡å½©è™¹è¾¹æ¡†æ•ˆæœ */
        .empty-bubble.rainbow {
            border: 1.5px solid rgba(255, 255, 255, 0.6);
            box-shadow: 
                0 0 15px rgba(255, 255, 255, 0.2),
                inset 0 0 15px rgba(255, 149, 0, 0.2);
        }
        
        .empty-bubble.rainbow2 {
            border: 1.5px solid rgba(255, 255, 255, 0.6);
            box-shadow: 
                0 0 15px rgba(255, 255, 255, 0.2),
                inset 0 0 15px rgba(78, 205, 196, 0.2);
        }
        
        /* ç©ºæ³¡æ³¡åå…‰æ•ˆæœ */
        .empty-bubble::after {
            content: '';
            position: absolute;
            top: 25%;
            left: 25%;
            width: 10%;
            height: 10%;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
        }

        @keyframes navFloat {
            0%, 100% {
                transform: translate(-50%, -50%);
            }
            50% {
                transform: translate(-50%, calc(-50% - 5px));
            }
        }

        .nav-point:hover {
            animation: navFloat 2s ease-in-out infinite;
        }

        /* å¢åŠ ç¼ºå¤±çš„CSSåŠ¨ç”»æ ·å¼ */
        .circle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(
                circle at center,
                rgba(255, 255, 255, 0.4) 0%,
                rgba(255, 255, 255, 0.1) 70%
            );
            transform: translate(-50%, -50%);
            animation: circle-expand 3s ease-out forwards;
            pointer-events: none;
        }

        .wave-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(255, 255, 255, 0.1),
                rgba(255, 255, 255, 0.05) 50%,
                rgba(255, 255, 255, 0.1)
            );
            animation: wave 5s ease-in-out infinite alternate;
        }

        .scan-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(
                to right,
                rgba(255, 255, 255, 0.1),
                rgba(255, 255, 255, 0.5),
                rgba(255, 255, 255, 0.1)
            );
            animation: scan 3s ease-in-out infinite;
        }

        .particle-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        @keyframes circle-expand {
            0% {
                width: 0;
                height: 0;
                opacity: 0.7;
            }
            100% {
                width: 200%;
                height: 200%;
                opacity: 0;
            }
        }

        @keyframes wave {
            0% {
                transform: translateY(-30%) scaleY(1);
            }
            100% {
                transform: translateY(30%) scaleY(1.2);
            }
        }
    </style>
</head>
<body>
    <!-- é¦–é¡µ -->
    <div class="home-page active">
        <canvas class="home-canvas" id="home-canvas"></canvas>
        <div class="home-content">
            <h1 class="home-title">ä»¥å·±ä¸ºæ™¯</h1>
            <p class="home-subtitle">æƒ…ç»ªé¢å…·æ²‰æµ¸å¼è‰ºæœ¯å±•ç­–åˆ’æ–¹æ¡ˆ</p>
            <button class="enter-button">è¿›å…¥å±•è§ˆ</button>
        </div>
    </div>

    <!-- æˆ¿é—´å¯¼èˆª -->
    <nav class="room-nav">
        <div class="nav-line"></div>
        <div class="nav-item active" data-room="infinity">
            <canvas class="nav-canvas" id="infinity-nav"></canvas>
        </div>
        <div class="nav-item" data-room="bubble">
            <canvas class="nav-canvas" id="bubble-nav"></canvas>
        </div>
        <div class="nav-item" data-room="drawing">
            <canvas class="nav-canvas" id="drawing-nav"></canvas>
        </div>
        <div class="nav-item" data-room="nails">
            <canvas class="nav-canvas" id="nails-nav"></canvas>
        </div>
        <div class="nav-item" data-room="emotion">
            <canvas class="nav-canvas" id="emotion-nav"></canvas>
        </div>
        <div class="nav-item" data-room="pendulum">
            <canvas class="nav-canvas" id="pendulum-nav"></canvas>
        </div>
    </nav>

    <!-- æ— é™æˆ¿é—´ -->
    <section id="infinity-room" class="room active">
        <h2 class="room-title">æ— é™</h2>
        <div class="room-content infinity-content">
            <video class="infinity-video" autoplay loop muted playsinline>
                <source src="1.mp4" type="video/mp4">
            </video>
            <div class="video-controls">
                <div class="volume-control">
                    <span class="volume-icon">ğŸ”Š</span>
                    <input type="range" class="volume-slider" min="0" max="1" step="0.1" value="0.5">
                </div>
            </div>
        </div>
    </section>

    <!-- æ³¡æ³¡æˆ¿é—´ -->
    <section id="bubble-room" class="room">
        <div class="room-content" id="bubbleGallery"></div>
        <audio id="bubble-sound" preload="auto">
            <source src="bubble.mp3" type="audio/mp3">
            <!-- å¦‚æœæ²¡æœ‰bubble.mp3æ–‡ä»¶ï¼Œå°†ä¼šé™é»˜å¤±è´¥ -->
        </audio>
    </section>

    <!-- é’‰å­æˆ¿é—´ -->
    <section id="nails-room" class="room">
        <div class="room-content">
            <div class="image-container" id="nailsContainer"></div>
        </div>
    </section>

    <!-- æƒ…ç»ªæˆ¿é—´ -->
    <section id="emotion-room" class="room">
        <div class="room-content">
            <div class="emotion-dialog" id="emotionDialog">
                <div class="emotion-dialog-container active" id="mainDialog">
                    <div class="dialog-header">
                        <h2>æƒ…ç»ªæ¢ç´¢</h2>
                </div>
                    <div class="dialog-content">
                        <p>åœ¨è¿™ä¸ªå……æ»¡æƒ…ç»ªçš„ä¸–ç•Œé‡Œï¼Œä½ æƒ³è¦æ¢ç´¢ä»€ä¹ˆï¼Ÿ</p>
            </div>
                    <div class="dialog-options">
                        <div class="dialog-option" data-scenario="workplace">
                            <span class="option-icon">ğŸ’¼</span>
                            <span class="option-text">ç¤¾å›¢æ´»åŠ¨å†²çª</span>
                        </div>
                        <div class="dialog-option" data-scenario="relationship">
                            <span class="option-icon">ğŸ“š</span>
                            <span class="option-text">å°ç»„ä½œä¸šåˆ†æ­§</span>
                        </div>
                        <div class="dialog-option" data-scenario="dorm">
                            <span class="option-icon">ğŸ </span>
                            <span class="option-text">å®¿èˆç”Ÿæ´»æ‘©æ“¦</span>
                        </div>
                    </div>
                </div>
                
                <!-- èŒåœºæƒ…ç»ªæƒ…æ™¯ -->
                <div class="emotion-dialog-container" id="workplaceDialog">
                    <div class="dialog-header">
                        <h2>ç¤¾å›¢æ´»åŠ¨å†²çª</h2>
                        <button class="back-button" data-target="mainDialog">è¿”å›</button>
                    </div>
                    <div class="dialog-content">
                        <p>å¤§å­¦è¾©è®ºé˜Ÿå¤‡æˆ˜çœçº§æ¯”èµ›ï¼Œé˜Ÿé•¿ä¸´æ—¶è¦æ±‚é˜Ÿå‘˜é€šå®µä¿®æ”¹è¾©ç¨¿ã€‚è¿ç»­ä¸€å‘¨ç†¬å¤œå†™ä½œä¸šå’Œå¤‡èµ›ï¼Œèº«ä½“æåº¦ç–²æƒ«ï¼Œå¯¹é˜Ÿé•¿ç‹¬æ–­ä¸“è¡Œçš„å®‰æ’æ„Ÿåˆ°æ„¤æ€’åˆå§”å±ˆï¼Œè®¤ä¸ºè¿™æ ·çš„é«˜å¼ºåº¦ä¿®æ”¹æ¯«æ— æ„ä¹‰ï¼Œç”šè‡³æƒ³ç›´æ¥é€€å‡ºã€‚è¿™æ—¶ä½ ä¼šï¼š</p>
                    </div>
                    <div class="dialog-options">
                        <div class="dialog-option" data-result="workplace-real">
                            <span class="option-icon">ğŸ˜¤</span>
                            <span class="option-text">è¡¨è¾¾ä¸æ»¡ï¼ŒåšæŒå·±è§</span>
                        </div>
                        <div class="dialog-option" data-result="workplace-mask">
                            <span class="option-icon">ğŸ˜Š</span>
                            <span class="option-text">ç¬‘ç€ç­”åº”ï¼Œç§¯æé…åˆ</span>
                        </div>
                    </div>
                </div>
                
                <!-- äººé™…å…³ç³»æƒ…æ™¯ -->
                <div class="emotion-dialog-container" id="relationshipDialog">
                    <div class="dialog-header">
                        <h2>å°ç»„ä½œä¸šåˆ†æ­§</h2>
                        <button class="back-button" data-target="mainDialog">è¿”å›</button>
                    </div>
                    <div class="dialog-content">
                        <p>æ–‡å­¦è¯¾å°ç»„ä½œä¸šï¼Œç»„å‘˜å°å¼ å…¨ç¨‹åˆ’æ°´ï¼Œæ±‡æŠ¥å½“å¤©å´æŠ¢ç€å‘è¨€ï¼Œè¿˜æŠŠåŠŸåŠ³å…¨æ½åœ¨è‡ªå·±èº«ä¸Šã€‚ä½ æŸ¥é˜…å¤§é‡èµ„æ–™ã€ç†¬å¤œæ’°å†™æŠ¥å‘Šï¼Œå´è¢«ä»–äººçªƒå–æˆæœï¼Œæ»¡å¿ƒå§”å±ˆå’Œæ„¤æ€’ã€‚è¿™æ—¶ä½ ä¼šï¼š</p>
                    </div>
                    <div class="dialog-options">
                        <div class="dialog-option" data-result="relationship-real">
                            <span class="option-icon">ğŸ—£ï¸</span>
                            <span class="option-text">å½“åœºæŒ‡å‡ºé—®é¢˜</span>
                        </div>
                        <div class="dialog-option" data-result="relationship-mask">
                            <span class="option-icon">ğŸ¤</span>
                            <span class="option-text">å¾®ç¬‘é¼“æŒï¼Œä¿æŒæ²‰é»˜</span>
                        </div>
                    </div>
                </div>

                <!-- å®¿èˆç”Ÿæ´»æƒ…æ™¯ -->
                <div class="emotion-dialog-container" id="dormDialog">
                    <div class="dialog-header">
                        <h2>å®¿èˆç”Ÿæ´»æ‘©æ“¦</h2>
                        <button class="back-button" data-target="mainDialog">è¿”å›</button>
                    </div>
                    <div class="dialog-content">
                        <p>å®¤å‹æ€»æ˜¯åœ¨å¤§å®¶ä¼‘æ¯æ—¶é—´å¤§å£°æ‰“ç”µè¯ï¼Œå¤šæ¬¡æé†’æ— æœã€‚æŸå¤©æ·±å¤œï¼Œå®¤å‹åˆåœ¨å®¿èˆå…´å¥‹èŠå¤©ã€‚ä½ è¢«åµå¾—éš¾ä»¥å…¥ç¡ï¼Œç§¯å‹å·²ä¹…çš„ä¸æ»¡ç¬é—´çˆ†å‘ã€‚è¿™æ—¶ä½ ä¼šï¼š</p>
                    </div>
                    <div class="dialog-options">
                        <div class="dialog-option" data-result="dorm-real">
                            <span class="option-icon">ğŸ˜ </span>
                            <span class="option-text">ç›´æ¥è¡¨è¾¾ä¸æ»¡</span>
                        </div>
                        <div class="dialog-option" data-result="dorm-mask">
                            <span class="option-icon">ğŸ˜Œ</span>
                            <span class="option-text">è½»å£°æé†’ï¼Œä¿æŒå¹³å’Œ</span>
                        </div>
                    </div>
                </div>
                
                <!-- ç»“æœåŠ¨ç”»èƒŒæ™¯ - ç§»åˆ°å¯¹è¯æ¡†å¤–éƒ¨ï¼Œæˆä¸ºå…¨å±èƒŒæ™¯ -->
                <div id="result-animation" class="result-animation"></div>
                
                <!-- ç»“æœæ˜¾ç¤ºåŒº -->
                <div class="emotion-dialog-container" id="resultDialog">
                    <div class="dialog-header">
                        <h2 id="result-title">ç»“æœ</h2>
                        <button class="back-button" data-target="mainDialog">è¿”å›ä¸»é¡µ</button>
                    </div>
                    <div class="dialog-content">
                        <p id="result-description"></p>
                    </div>
                    <div class="dialog-options">
                        <div class="dialog-option explore-more" data-target="mainDialog">
                            <span class="option-text">ç»§ç»­æ¢ç´¢</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æƒ…ç»ªéŸ³æ•ˆ -->
            <audio id="emotion-sound-real" preload="auto">
                <source src="assets/audio/emotion-real.mp3" type="audio/mp3">
            </audio>
            <audio id="emotion-sound-mask" preload="auto">
                <source src="assets/audio/emotion-mask.mp3" type="audio/mp3">
            </audio>
        </div>
    </section>

    <!-- é’Ÿæ‘†æˆ¿é—´ -->
    <section id="pendulum-room" class="room">
        <div class="room-content">
            <div class="pendulum-container">
                <div class="pendulum" id="pendulum">
                    <div class="pendulum-bob"></div>
                </div>
                <div class="pendulum-text" id="pendulum-text">æˆ‘å¾ˆéš¾è¿‡</div>
            </div>
        </div>
        <audio id="pendulum-sound" src="tick.mp3" preload="auto"></audio>
    </section>

    <!-- ç»˜ç”»æˆ¿é—´ -->
    <section id="drawing-room" class="room">
        <div class="room-content">
            <canvas class="drawing-canvas" id="drawing-canvas"></canvas>
            <div class="drawing-controls">
                <input type="color" class="color-picker" value="#ffffff">
                <input type="range" class="brush-size" min="1" max="50" value="5">
                <button class="drawing-btn" id="clear-btn">æ¸…é™¤</button>
                <button class="drawing-btn" id="save-btn">ä¿å­˜</button>
            </div>
        </div>
    </section>

    <script>
        // ä¿®æ”¹é¦–é¡µ3Dæ¨¡å‹åˆå§‹åŒ–ä»£ç 
        function initHomeModel() {
            const canvas = document.getElementById('home-canvas');
            if (!canvas) return;

            // åˆ›å»ºåœºæ™¯
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            
            // åˆ›å»ºæ¸²æŸ“å™¨
            const renderer = new THREE.WebGLRenderer({
                canvas: canvas,
                alpha: true,
                antialias: true
            });
            renderer.setSize(1200, 1200);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // åˆ›å»ºç¯å½¢ç»“
            const geometry = new THREE.TorusKnotGeometry(2.5, 0.5, 200, 32);
            
            // åˆ›å»ºæ¸å˜æè´¨
            const vertexShader = `
                varying vec3 vPosition;
                void main() {
                    vPosition = position;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            `;
            
            const fragmentShader = `
                varying vec3 vPosition;
                uniform vec3 colorA;
                uniform vec3 colorB;
                void main() {
                    float t = (vPosition.y + 2.5) / 5.0;
                    vec3 color = mix(colorA, colorB, t);
                    gl_FragColor = vec4(color, 0.8);
                }
            `;

            const material = new THREE.ShaderMaterial({
                uniforms: {
                    colorA: { value: new THREE.Color(0x4ECDC4) },
                    colorB: { value: new THREE.Color(0xff9500) }
                },
                vertexShader: vertexShader,
                fragmentShader: fragmentShader,
                transparent: true,
                wireframe: true
            });

            const torusKnot = new THREE.Mesh(geometry, material);
            scene.add(torusKnot);

            // æ·»åŠ å…‰æº
            const light = new THREE.PointLight(0xffffff, 1);
            light.position.set(5, 5, 5);
            scene.add(light);

            const ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);

            camera.position.z = 8;
            camera.position.x = 0;

            // åŠ¨ç”»å¾ªç¯
            let animationFrameId;
            function animate() {
                animationFrameId = requestAnimationFrame(animate);

                if (torusKnot && material.uniforms) {
                    torusKnot.rotation.x += 0.003;
                    torusKnot.rotation.y += 0.003;

                    // æ›´æ–°æ¸å˜è‰²çš„æ··åˆ
                    const time = Date.now() * 0.001;
                    material.uniforms.colorA.value.setHSL(0.5 + Math.sin(time) * 0.1, 0.8, 0.5);
                    material.uniforms.colorB.value.setHSL(0.1 + Math.sin(time) * 0.1, 0.8, 0.5);
                }

                renderer.render(scene, camera);
            }

            animate();

            // å“åº”çª—å£å¤§å°å˜åŒ–
            function onWindowResize() {
                if (!canvas) return;
                
                const width = canvas.clientWidth;
                const height = canvas.clientHeight;
                
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                renderer.setSize(width, height);
            }

            window.addEventListener('resize', onWindowResize);

            // æ·»åŠ é¼ æ ‡äº¤äº’
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };

            canvas.addEventListener('mousedown', (e) => {
                isDragging = true;
            });

            canvas.addEventListener('mousemove', (e) => {
                if (isDragging && torusKnot) {
                    const deltaMove = {
                        x: e.offsetX - previousMousePosition.x,
                        y: e.offsetY - previousMousePosition.y
                    };

                    torusKnot.rotation.y += deltaMove.x * 0.01;
                    torusKnot.rotation.x += deltaMove.y * 0.01;
                }

                previousMousePosition = {
                    x: e.offsetX,
                    y: e.offsetY
                };
            });

            canvas.addEventListener('mouseup', () => {
                isDragging = false;
            });

            // æ¸…ç†å‡½æ•°
            return () => {
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                }
                window.removeEventListener('resize', onWindowResize);
                geometry.dispose();
                material.dispose();
                renderer.dispose();
            };
        }

        // ä¿®æ”¹3Då¯¼èˆªæ¨¡å‹åˆå§‹åŒ–ä»£ç 
        function initNavModels() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                const canvas = item.querySelector('canvas');
                if (!canvas) return;
                
                const room = item.dataset.room;
                
                // åˆ›å»ºåœºæ™¯
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({
                    canvas: canvas,
                    alpha: true,
                    antialias: true
                });
                renderer.setSize(60, 60);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                
                // æ·»åŠ å…‰æº
                const light = new THREE.PointLight(0xffffff, 1);
                light.position.set(1, 1, 1);
                scene.add(light);
                
                const ambientLight = new THREE.AmbientLight(0x404040);
                scene.add(ambientLight);
                
                // åˆ›å»ºæ¨¡å‹
                const model = navModels[room].create(scene);
                scene.add(model);
                
                camera.position.z = 2;
                
                // åŠ¨ç”»å¾ªç¯
                let animationFrameId;
                function animate() {
                    animationFrameId = requestAnimationFrame(animate);
                    
                    if (model) {
                        model.rotation.x += 0.01;
                        model.rotation.y += 0.01;
                    }
                    
                    renderer.render(scene, camera);
                }
                
                animate();
                
                // æ·»åŠ äº¤äº’æ•ˆæœ
                item.addEventListener('mouseenter', () => {
                    if (model) {
                        gsap.to(model.rotation, {
                            x: model.rotation.x + Math.PI,
                            y: model.rotation.y + Math.PI,
                            duration: 1,
                            ease: "power2.inOut"
                        });
                    }
                });

                // æ¸…ç†å‡½æ•°
                return () => {
                    if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                    }
                    if (model.geometry) model.geometry.dispose();
                    if (model.material) model.material.dispose();
                    renderer.dispose();
                };
            });
        }

        // é¦–é¡µäº¤äº’
        const homePage = document.querySelector('.home-page');
        const enterButton = document.querySelector('.enter-button');

        enterButton.addEventListener('click', () => {
            homePage.classList.remove('active');
            setTimeout(() => {
                homePage.classList.add('hidden');
            }, 500);
        });

        // æˆ¿é—´åˆ‡æ¢
        const rooms = document.querySelectorAll('.room');
        const navItems = document.querySelectorAll('.nav-item');

        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const targetRoom = item.dataset.room;
                
                // åœæ­¢é’Ÿæ‘†åŠ¨ç”»å’ŒéŸ³æ•ˆ
                stopAnimation();
                
                // æ›´æ–°å¯¼èˆªé¡¹çŠ¶æ€
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
                
                // åˆ‡æ¢æˆ¿é—´
                rooms.forEach(room => {
                    room.classList.remove('active');
                    if (room.id === `${targetRoom}-room`) {
                        room.classList.add('active');
                        
                        // å¦‚æœæ˜¯æ³¡æ³¡æˆ¿é—´ï¼Œé‡æ–°åˆ›å»ºæ³¡æ³¡
                        if (targetRoom === 'bubble') {
                            // æ¸…é™¤ç°æœ‰æ³¡æ³¡
                            bubbleGallery.innerHTML = '';
                            // é‡æ–°åˆ›å»ºæ³¡æ³¡
                            createBubbles();
                            // æ’­æ”¾æ³¡æ³¡å£°éŸ³
                            if (bubbleSound) {
                                bubbleSound.currentTime = 0;
                                bubbleSound.play().catch(e => {
                                    console.log("æ³¡æ³¡éŸ³æ•ˆæ’­æ”¾å¤±è´¥:", e);
                                });
                            }
                        }
                        
                        // å¦‚æœæ˜¯é’Ÿæ‘†æˆ¿é—´ï¼Œå¯åŠ¨åŠ¨ç”»å’ŒéŸ³æ•ˆ
                        if (targetRoom === 'pendulum') {
                            startPendulum();
                        }
                    }
                });
            });
        });

        // æ³¡æ³¡ç”»å»Š
        const bubbleGallery = document.getElementById('bubbleGallery');
        const bubbleSound = document.getElementById('bubble-sound');
        let bubblesInitialized = false;
        const bubbleData = [
            { image: '1.jpg' },
            { image: '2.jpg' },
            { image: '3.jpg' },
            { image: '4.jpg' },
            { image: '5.jpg' },
            { image: '6.jpg' },
            { image: '7.jpg' },
            { image: '8.jpg' },
            { image: '9.jpg' },
            { image: '10.jpg' },
            { image: '11.jpg' },
            { image: '12.jpg' }
        ];

        // åˆå§‹åŒ–åˆ›å»ºæ³¡æ³¡å‡½æ•°
        function createBubbles() {
            bubbleGallery.innerHTML = '';
            
            // å›ºå®šæ˜¾ç¤º12ä¸ªæ³¡æ³¡
            const bubbleCount = 12;
            
            // è·å–ç”»å»Šå®¹å™¨çš„å°ºå¯¸
            const galleryRect = bubbleGallery.getBoundingClientRect();
            const galleryWidth = galleryRect.width;
            const galleryHeight = galleryRect.height;
            
            // è®¡ç®—æ³¡æ³¡å¤§å°ï¼ˆä¿è¯ä¸ä¼šå¤ªå¤§ï¼‰
            const maxBubbleSize = Math.min(galleryWidth, galleryHeight) * 0.25;
            
            // åˆ›å»ºå®‰å…¨åŒºåŸŸï¼Œé˜²æ­¢æ³¡æ³¡å¤ªé è¿‘è¾¹ç¼˜
            const safeMargin = Math.max(40, maxBubbleSize / 2);
            
            // å·²æ”¾ç½®çš„æ³¡æ³¡ä¸­å¿ƒç‚¹
            const placedBubbles = [];
            
            // å®šä¹‰æ³¡æ³¡äº§ç”Ÿçš„èµ·å§‹ç‚¹ï¼ˆä¸­å¿ƒåä¸‹çš„ä½ç½®ï¼‰
            const sourceX = galleryWidth / 2;
            const sourceY = galleryHeight * 0.8;
            
            // åˆ›å»ºä¸»è¦æ³¡æ³¡
            createMainBubbles(bubbleCount, galleryWidth, galleryHeight, maxBubbleSize, safeMargin, placedBubbles, sourceX, sourceY);
            
            // åˆ›å»ºç©ºæ³¡æ³¡ (20-25ä¸ªç©ºæ³¡æ³¡)
            const emptyBubbleCount = 20 + Math.floor(Math.random() * 6);
            createEmptyBubbles(emptyBubbleCount, galleryWidth, galleryHeight, maxBubbleSize, safeMargin, placedBubbles, sourceX, sourceY);
            
            // å¯åŠ¨å°æ³¡æ³¡ç”Ÿæˆå™¨
            startTinyBubbleGenerator(sourceX, sourceY);
        }
        
        // åˆ›å»ºä¸»è¦æ³¡æ³¡
        function createMainBubbles(bubbleCount, galleryWidth, galleryHeight, maxBubbleSize, safeMargin, placedBubbles, sourceX, sourceY) {
            // åˆ›å»ºæ³¡æ³¡
            for (let i = 0; i < bubbleCount; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                
                // æ›´å¤šéšæœºåŒ–çš„æ³¡æ³¡å¤§å°
                let bubbleSize;
                const sizeRandom = Math.random();
                
                if (sizeRandom < 0.2) {
                    // 20%çš„æ¦‚ç‡æ˜¯å¤§æ³¡æ³¡
                    bubbleSize = Math.min(260, maxBubbleSize * 1.1);
                } else if (sizeRandom < 0.5) {
                    // 30%çš„æ¦‚ç‡æ˜¯ä¸­ç­‰æ³¡æ³¡
                    bubbleSize = Math.min(200, maxBubbleSize * 0.9);
                } else if (sizeRandom < 0.8) {
                    // 30%çš„æ¦‚ç‡æ˜¯å°æ³¡æ³¡
                    bubbleSize = Math.min(160, maxBubbleSize * 0.7);
                } else {
                    // 20%çš„æ¦‚ç‡æ˜¯å¾®å°æ³¡æ³¡
                    bubbleSize = Math.min(120, maxBubbleSize * 0.5);
                }
                
                // æ·»åŠ è½»å¾®éšæœºå˜åŒ–
                bubbleSize = bubbleSize * (0.9 + Math.random() * 0.2);
                bubbleSize = Math.round(bubbleSize);
                
                // è®¾ç½®æ³¡æ³¡å¤§å°
                bubble.style.width = `${bubbleSize}px`;
                bubble.style.height = `${bubbleSize}px`;
                
                // æ ¹æ®å¤§å°è®¾ç½®é€æ˜åº¦ - å°æ³¡æ³¡æ›´é€æ˜
                const opacity = 0.65 + (bubbleSize / (maxBubbleSize * 1.1)) * 0.35;
                bubble.style.opacity = "0"; // åˆå§‹é€æ˜åº¦ä¸º0
                
                // æ·»åŠ å›¾ç‰‡
                const img = document.createElement('img');
                const dataIndex = i % bubbleData.length; // å¾ªç¯ä½¿ç”¨å›¾ç‰‡
                img.src = bubbleData[dataIndex].image;
                bubble.appendChild(img);
                
                // å°è¯•æ‰¾åˆ°ä¸€ä¸ªä¸é‡å çš„ä½ç½®
                let attempts = 0;
                let validPosition = false;
                let x, y;
                
                // æœ€å¤šå°è¯•50æ¬¡æ‰¾ä½ç½®
                while (!validPosition && attempts < 50) {
                    // åœ¨å®‰å…¨åŒºåŸŸå†…éšæœºç”Ÿæˆä½ç½®
                    x = safeMargin + Math.random() * (galleryWidth - safeMargin * 2);
                    y = safeMargin + Math.random() * (galleryHeight - safeMargin * 2);
                    
                    // æ£€æŸ¥ä¸å·²æœ‰æ³¡æ³¡çš„è·ç¦»
                    validPosition = true;
                    
                    // æœ€å°å…è®¸çš„è·ç¦»ï¼ˆæ³¡æ³¡ç›´å¾„çš„0.7å€ï¼‰
                    const minDistance = bubbleSize * 0.7;
                    
                    for (const placed of placedBubbles) {
                        const distance = Math.sqrt(
                            Math.pow(x - placed.x, 2) + 
                            Math.pow(y - placed.y, 2)
                        );
                        
                        // å¦‚æœè·ç¦»å¤ªè¿‘ï¼Œå°è¯•æ–°ä½ç½®
                        if (distance < minDistance + placed.size / 2) {
                            validPosition = false;
                            break;
                        }
                    }
                    
                    attempts++;
                }
                
                // å¦‚æœæ‰¾ä¸åˆ°ç†æƒ³ä½ç½®ï¼Œå°±å‡å°‘è¦æ±‚
                if (!validPosition) {
                    // éšæœºä½ç½®ï¼Œä¸è€ƒè™‘é‡å 
                    x = safeMargin + Math.random() * (galleryWidth - safeMargin * 2);
                    y = safeMargin + Math.random() * (galleryHeight - safeMargin * 2);
                }
                
                // è®°å½•æ”¾ç½®çš„æ³¡æ³¡
                placedBubbles.push({
                    x: x,
                    y: y,
                    size: bubbleSize
                });
                
                // æ³¡æ³¡çš„ç›®æ ‡ä½ç½®ï¼ˆæœ€ç»ˆä½ç½®ï¼‰
                const targetX = x - bubbleSize / 2;
                const targetY = y - bubbleSize / 2;
                
                // ä¸ºäº†å…¥åœºåŠ¨ç”»ï¼Œè®¾ç½®åˆå§‹ä½ç½®ä¸ºèµ·å§‹ç‚¹
                bubble.style.left = `${sourceX - bubbleSize / 2}px`;
                bubble.style.top = `${sourceY - bubbleSize / 2}px`;
                bubble.style.transform = "scale(0.2) rotate(0deg)"; // åˆå§‹æ—¶æ³¡æ³¡å¾ˆå°
                
                // æ·»åŠ éšæœºæ—‹è½¬
                const rotation = (Math.random() * 40) - 20; // -20Â° åˆ° +20Â°
                bubble.style.setProperty('--rotation', `${rotation}deg`);
                
                // æ·»åŠ åˆ°ç”»å»Š
                bubbleGallery.appendChild(bubble);
                
                // å…¥åœºåŠ¨ç”» - ä»èµ·ç‚¹å¹å‡ºåˆ°ç›®æ ‡ä½ç½®
                const entryDelay = 0.1 + (i * 0.1) + (Math.random() * 0.2); // é”™å¼€æ¯ä¸ªæ³¡æ³¡çš„å‡ºç°æ—¶é—´
                const entryDuration = 1 + Math.random() * 1.5; // 1-2.5ç§’çš„å…¥åœºæ—¶é—´
                
                // ä½¿ç”¨GSAPåŠ¨ç”»åº“åˆ›å»ºå…¥åœºåŠ¨ç”»
                gsap.to(bubble, {
                    x: targetX - (sourceX - bubbleSize / 2), // ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„xä½ç§»
                    y: targetY - (sourceY - bubbleSize / 2), // ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„yä½ç§»
                    opacity: opacity,
                    scale: 1,
                    rotation: rotation,
                    duration: entryDuration,
                    delay: entryDelay,
                    ease: "power2.out",
                    onComplete: () => {
                        // å…¥åœºåŠ¨ç”»å®Œæˆåå¼€å§‹æ­£å¸¸çš„æµ®åŠ¨åŠ¨ç”»
                        startBubbleFloatingAnimation(bubble, bubbleSize);
                    }
                });
            }
            enableBubbleHoverEffect();
        }
        
        // åˆ›å»ºç©ºæ³¡æ³¡
        function createEmptyBubbles(count, galleryWidth, galleryHeight, maxBubbleSize, safeMargin, placedBubbles, sourceX, sourceY) {
            for (let i = 0; i < count; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'empty-bubble';
                
                // æ·»åŠ å½©è™¹æ•ˆæœæ³¡æ³¡
                const rainbowChance = Math.random();
                if (rainbowChance < 0.15) {
                    bubble.classList.add('rainbow');
                } else if (rainbowChance < 0.3) {
                    bubble.classList.add('rainbow2');
                }
                
                // éšæœºå¤§å° (30-140px)
                const bubbleSize = Math.round(30 + Math.random() * 110);
                
                // è®¾ç½®æ³¡æ³¡å¤§å°
                bubble.style.width = `${bubbleSize}px`;
                bubble.style.height = `${bubbleSize}px`;
                
                // æ³¡æ³¡é€æ˜åº¦éšæœºï¼ˆæ›´é€æ˜ï¼‰
                const opacity = 0.15 + Math.random() * 0.4;
                bubble.style.opacity = "0"; // åˆå§‹é€æ˜åº¦ä¸º0
                
                // å°è¯•æ‰¾åˆ°ä¸€ä¸ªä¸å¤ªé‡å çš„ä½ç½®
                let attempts = 0;
                let validPosition = false;
                let x, y;
                
                // æœ€å¤šå°è¯•20æ¬¡æ‰¾ä½ç½®
                while (!validPosition && attempts < 20) {
                    // åœ¨å®‰å…¨åŒºåŸŸå†…éšæœºç”Ÿæˆä½ç½®
                    x = safeMargin + Math.random() * (galleryWidth - safeMargin * 2);
                    y = safeMargin + Math.random() * (galleryHeight - safeMargin * 2);
                    
                    // å¯¹äºç©ºæ³¡æ³¡ï¼Œå…è®¸æ›´å¤šé‡å 
                    validPosition = true;
                    
                    // æœ€å°å…è®¸çš„è·ç¦»ï¼ˆæ¯”æ™®é€šæ³¡æ³¡è¦å°ï¼‰
                    const minDistance = bubbleSize * 0.4;
                    
                    for (const placed of placedBubbles) {
                        const distance = Math.sqrt(
                            Math.pow(x - placed.x, 2) + 
                            Math.pow(y - placed.y, 2)
                        );
                        
                        // å¦‚æœè·ç¦»å¤ªè¿‘ï¼Œå°è¯•æ–°ä½ç½®
                        if (distance < minDistance + placed.size / 2) {
                            validPosition = false;
                            break;
                        }
                    }
                    
                    attempts++;
                }
                
                // å³ä½¿æ‰¾ä¸åˆ°ç†æƒ³ä½ç½®ï¼Œä¹Ÿæ·»åŠ æ³¡æ³¡
                if (!validPosition) {
                    // éšæœºä½ç½®ï¼Œä¸è€ƒè™‘é‡å 
                    x = safeMargin + Math.random() * (galleryWidth - safeMargin * 2);
                    y = safeMargin + Math.random() * (galleryHeight - safeMargin * 2);
                }
                
                // è®°å½•æ”¾ç½®çš„æ³¡æ³¡ï¼ˆä¸ºäº†é¿å…åç»­çš„æ³¡æ³¡å®Œå…¨é‡å ï¼‰
                placedBubbles.push({
                    x: x,
                    y: y,
                    size: bubbleSize * 0.7 // å‡å°å½±å“èŒƒå›´ï¼Œå…è®¸æ›´å¤šç©ºæ³¡æ³¡
                });
                
                // æ³¡æ³¡çš„ç›®æ ‡ä½ç½®ï¼ˆæœ€ç»ˆä½ç½®ï¼‰
                const targetX = x - bubbleSize / 2;
                const targetY = y - bubbleSize / 2;
                
                // ä¸ºäº†å…¥åœºåŠ¨ç”»ï¼Œè®¾ç½®åˆå§‹ä½ç½®ä¸ºèµ·å§‹ç‚¹
                bubble.style.left = `${sourceX - bubbleSize / 2}px`;
                bubble.style.top = `${sourceY - bubbleSize / 2}px`;
                bubble.style.transform = "scale(0.1) rotate(0deg)"; // åˆå§‹æ—¶æ³¡æ³¡å¾ˆå°
                
                // æ·»åŠ åˆ°ç”»å»Š
                bubbleGallery.appendChild(bubble);
                
                // å…¥åœºåŠ¨ç”» - ä»èµ·ç‚¹å¹å‡ºåˆ°ç›®æ ‡ä½ç½®
                const entryDelay = 0.05 + (i * 0.07) + (Math.random() * 0.3); // é”™å¼€æ¯ä¸ªæ³¡æ³¡çš„å‡ºç°æ—¶é—´
                const entryDuration = 0.8 + Math.random() * 1.7; // 0.8-2.5ç§’çš„å…¥åœºæ—¶é—´
                
                // ä½¿ç”¨GSAPåŠ¨ç”»åº“åˆ›å»ºå…¥åœºåŠ¨ç”»
                gsap.to(bubble, {
                    x: targetX - (sourceX - bubbleSize / 2), // ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„xä½ç§»
                    y: targetY - (sourceY - bubbleSize / 2), // ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„yä½ç§»
                    opacity: opacity,
                    scale: 1,
                    duration: entryDuration,
                    delay: entryDelay,
                    ease: "power2.out",
                    onComplete: () => {
                        // å…¥åœºåŠ¨ç”»å®Œæˆåå¼€å§‹æ­£å¸¸çš„æµ®åŠ¨åŠ¨ç”»
                        startEmptyBubbleAnimation(bubble, bubbleSize);
                    }
                });
            }
        }
        
        // åˆ›å»ºå°æ³¡æ³¡ç”Ÿæˆå™¨
        function startTinyBubbleGenerator(sourceX, sourceY) {
            let bubbleCount = 0;  // è®¡æ•°å·²ç”Ÿæˆçš„å°æ³¡æ³¡æ•°é‡
            const maxBubbles = 15;  // æœ€å¤šç”Ÿæˆ15ä¸ªå°æ³¡æ³¡
            
            // å®šä¹‰ä¸€ä¸ªé—´éš”ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´äº§ç”Ÿä¸€ä¸ªå°æ³¡æ³¡
            const bubbleInterval = setInterval(() => {
                // å¦‚æœä¸åœ¨æ³¡æ³¡æˆ¿é—´æˆ–å·²è¾¾åˆ°æœ€å¤§æ•°é‡ï¼Œåœæ­¢ç”Ÿæˆ
                if (!document.getElementById('bubble-room').classList.contains('active') || bubbleCount >= maxBubbles) {
                    clearInterval(bubbleInterval);
                    return;
                }
                
                // åˆ›å»ºä¸€ä¸ªå°æ³¡æ³¡
                createTinyBubble(sourceX, sourceY);
                bubbleCount++;
                
                // å¦‚æœè¾¾åˆ°æœ€å¤§æ•°é‡ï¼Œæ¸…é™¤å®šæ—¶å™¨
                if (bubbleCount >= maxBubbles) {
                    clearInterval(bubbleInterval);
                }
            }, 800 + Math.random() * 1200); // 0.8-2ç§’çš„éšæœºé—´éš”
            
            // 60ç§’åè‡ªåŠ¨æ¸…é™¤é—´éš”ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ï¼ˆä½œä¸ºå¤‡ç”¨å®‰å…¨æªæ–½ï¼‰
            setTimeout(() => {
                clearInterval(bubbleInterval);
            }, 60000);
        }
        
        // åˆ›å»ºå•ä¸ªå°æ³¡æ³¡
        function createTinyBubble(sourceX, sourceY) {
            const bubbleGallery = document.getElementById('bubbleGallery');
            if (!bubbleGallery) return;
            
            // åˆ›å»ºæ³¡æ³¡å…ƒç´ 
            const bubble = document.createElement('div');
            bubble.className = 'tiny-bubble';
            
            // è®¾ç½®å°æ³¡æ³¡å°ºå¯¸ (15-25px)
            const size = 15 + Math.random() * 10;
            bubble.style.width = `${size}px`;
            bubble.style.height = `${size}px`;
            
            // è®¾ç½®åˆå§‹ä½ç½®
            bubble.style.left = `${sourceX - size/2 + (Math.random() * 20 - 10)}px`;
            bubble.style.top = `${sourceY - size/2}px`;
            
            // æ·»åŠ åˆ°ç”»å»Š
            bubbleGallery.appendChild(bubble);
            
            // éšæœºä¸Šå‡è·¯å¾„
            const endX = sourceX - size/2 + (Math.random() * 200 - 100); // å·¦å³éšæœºåç§»
            const endY = -100; // ä¸Šæ–¹æ¶ˆå¤±
            const duration = 4 + Math.random() * 3; // 4-7ç§’ä¸Šå‡æ—¶é—´
            
            // ä¸Šå‡åŠ¨ç”»
            gsap.to(bubble, {
                x: endX - (sourceX - size/2),
                y: endY - (sourceY - size/2),
                opacity: 0,
                duration: duration,
                ease: "power1.in",
                onComplete: () => {
                    // åŠ¨ç”»ç»“æŸåç§»é™¤æ³¡æ³¡
                    if (bubble.parentNode) {
                        bubble.parentNode.removeChild(bubble);
                    }
                }
            });
        }

        // å•ç‹¬æå–å‡ºæµ®åŠ¨åŠ¨ç”»é€»è¾‘ä»¥ä¾¿é‡ç”¨
        function startBubbleFloatingAnimation(bubble, bubbleSize) {
            // éšæœºåŒ–åŠ¨ç”» - åŸºäºæ³¡æ³¡å¤§å°
            // å°æ³¡æ³¡åŠ¨å¾—æ›´å¿«ã€å¹…åº¦æ›´å¤§ï¼Œå¤§æ³¡æ³¡åŠ¨å¾—æ›´æ…¢
            const sizeRatio = 260 / bubbleSize; // å¤§å°æ¯”ä¾‹ç³»æ•°
            
            // å‚ç›´æµ®åŠ¨å‚æ•°
            const animationRange = 5 + (Math.random() * 15) * Math.min(sizeRatio * 0.6, 1.8); // å°æ³¡æ³¡æµ®åŠ¨æ›´å¤š
            const duration = 1.5 + Math.random() * 1.5 + (bubbleSize / 260) * 2; // å¤§æ³¡æ³¡åŠ¨ç”»æ›´æ…¢
            const delay = Math.random() * 0.5; // è¾ƒçŸ­çš„å»¶è¿Ÿ
            
            // æ·»åŠ å‚ç›´æµ®åŠ¨åŠ¨ç”»
            gsap.to(bubble, {
                y: `+=${animationRange}`,
                duration: duration,
                ease: "sine.inOut",
                yoyo: true,
                repeat: -1,
                delay: delay
            });
            
            // æ·»åŠ è½»å¾®çš„æ°´å¹³æµ®åŠ¨åŠ¨ç”»
            const horizontalRange = 2 + (Math.random() * 10) * Math.min(sizeRatio * 0.4, 1.5); // å°æ³¡æ³¡æ°´å¹³æµ®åŠ¨æ›´å¤š
            const horizontalDuration = 2.5 + Math.random() * 2 + (bubbleSize / 260) * 2.5;
            
            gsap.to(bubble, {
                x: `+=${horizontalRange}`,
                duration: horizontalDuration,
                ease: "sine.inOut",
                yoyo: true,
                repeat: -1,
                delay: delay * 0.7
            });
            
            // æ·»åŠ è½»å¾®çš„æ—‹è½¬åŠ¨ç”» - å°æ³¡æ³¡æ—‹è½¬æ›´æ˜æ˜¾
            const rotationAmount = ((Math.random() * 6) - 3) * Math.min(sizeRatio * 0.7, 2);
            
            gsap.to(bubble, {
                rotation: `+=${rotationAmount}`,
                duration: duration * 1.3,
                ease: "sine.inOut",
                yoyo: true,
                repeat: -1,
                delay: delay * 0.4
            });
        }

        // ç©ºæ³¡æ³¡çš„åŠ¨ç”»æ•ˆæœ
        function startEmptyBubbleAnimation(bubble, bubbleSize) {
            // åŠ¨ç”»é€Ÿåº¦ä¸æ³¡æ³¡å¤§å°æˆåæ¯”
            const sizeRatio = 120 / bubbleSize;
            
            // å‚ç›´æµ®åŠ¨å‚æ•°
            const animationRange = 10 + (Math.random() * 20) * Math.min(sizeRatio, 1.5);
            const duration = 2 + Math.random() * 2 + (bubbleSize / 120);
            const delay = Math.random() * 0.5;
            
            // æ·»åŠ å‚ç›´æµ®åŠ¨åŠ¨ç”»
            gsap.to(bubble, {
                y: `+=${animationRange}`,
                duration: duration,
                ease: "sine.inOut",
                yoyo: true,
                repeat: -1,
                delay: delay
            });
            
            // æ·»åŠ è½»å¾®çš„æ°´å¹³æµ®åŠ¨åŠ¨ç”»
            const horizontalRange = 5 + (Math.random() * 10) * Math.min(sizeRatio, 1.5);
            const horizontalDuration = 3 + Math.random() * 3;
            
            gsap.to(bubble, {
                x: `+=${horizontalRange}`,
                duration: horizontalDuration,
                ease: "sine.inOut",
                yoyo: true,
                repeat: -1,
                delay: delay * 0.3
            });
            
            // æ·»åŠ é€æ˜åº¦å˜åŒ–åŠ¨ç”»
            gsap.to(bubble, {
                opacity: "-=0.2",
                duration: 3 + Math.random() * 2,
                ease: "sine.inOut",
                yoyo: true,
                repeat: -1
            });
            
            // æ·»åŠ è½»å¾®çš„å¤§å°å˜åŒ–
            gsap.to(bubble, {
                scale: 0.85 + (Math.random() * 0.3),
                duration: 4 + Math.random() * 3,
                ease: "sine.inOut",
                yoyo: true,
                repeat: -1,
                delay: delay * 0.5
            });
        }

        // å›¾ç‰‡å±•ç¤º
        const imageContainer = document.getElementById('nailsContainer');
        const mainImage = '2.png';

        function createImage() {
            imageContainer.innerHTML = '';
            
            const img = document.createElement('img');
            img.src = mainImage;
            img.alt = 'Main Image';
            img.className = 'main-image';
            
            imageContainer.appendChild(img);
        }

        // é’Ÿæ‘†ç³»ç»Ÿ
        const pendulum = document.getElementById('pendulum');
        const pendulumText = document.getElementById('pendulum-text');
        const pendulumRoom = document.getElementById('pendulum-room');
        const pendulumSound = document.getElementById('pendulum-sound');
        let currentMessageIndex = 0;
        let lastDirection = 'left';
        let isAnimating = false;
        let animationFrameId = null;
        let pendulumActive = false;

        const messages = {
            real: [
                "æˆ‘å¾ˆéš¾è¿‡",
                "æˆ‘å¾ˆç”Ÿæ°”",
                "æˆ‘å¾ˆå¼€å¿ƒ",
                "æˆ‘å¾ˆå®³æ€•",
                "æˆ‘éœ€è¦ä½ "
            ],
            mask: [
                "æˆ‘å¾ˆå¥½",
                "æ²¡ä»€ä¹ˆ",
                "æˆ‘å¾ˆå¼€å¿ƒ",
                "ä¸ç”¨æ‹…å¿ƒ",
                "ä½ èµ°å§"
            ]
        };

        // åˆå§‹åŒ–æ˜¾ç¤ºç¬¬ä¸€æ¡æ¶ˆæ¯
        function initPendulumText() {
            if (pendulumText) {
                pendulumText.textContent = messages.real[0];
                pendulumText.style.display = "block";
                pendulumText.style.visibility = "visible";
                pendulumText.style.opacity = "1";
                // è®¾ç½®æ–‡å­—åœ¨é’Ÿæ‘†åæ–¹
                pendulumText.style.zIndex = "1";
            }
        }

        function updatePendulumText(direction) {
            if (!pendulumText || isAnimating || !pendulumActive) return;
            
            isAnimating = true;
            const emotion = direction === 'left' ? 'real' : 'mask';
            const currentMessages = messages[emotion];
            
            // æ’­æ”¾é’Ÿæ‘†å£°éŸ³
            if (pendulumSound && pendulumActive) {
                pendulumSound.currentTime = 0;
                pendulumSound.play().catch(e => console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥:", e));
            }
            
            // æ–‡å­—æ·¡å‡ºåŠ¨ç”»
            gsap.to(pendulumText, {
                opacity: 0,
                duration: 0.3,
                onComplete: () => {
                    // æ›´æ–°æ–‡å­—å†…å®¹
                    pendulumText.textContent = currentMessages[currentMessageIndex];
                    
                    // è®¾ç½®æ–‡å­—ä½ç½®ï¼Œæ ¹æ®æ–¹å‘å†³å®šæ˜¯åœ¨é’Ÿæ‘†å‰æ–¹è¿˜æ˜¯åæ–¹
                    pendulumText.style.zIndex = direction === 'left' ? "1" : "3";
                    
                    // æ–‡å­—æ·¡å…¥åŠ¨ç”»
                    gsap.to(pendulumText, {
                        opacity: 1,
                        duration: 0.3,
                        onComplete: () => {
                            // åªåœ¨å·¦æ‘†æ—¶æ›´æ–°ç´¢å¼•
                            if (direction === 'left') {
                                currentMessageIndex = (currentMessageIndex + 1) % currentMessages.length;
                            }
                            
                            // é‡ç½®åŠ¨ç”»çŠ¶æ€
                            setTimeout(() => {
                                isAnimating = false;
                            }, 200);
                        }
                    });
                }
            });
        }

        // é’Ÿæ‘†åŠ¨ç”»ä¸»å¾ªç¯
        function animate() {
            if (!pendulum || !pendulumText || !pendulumActive) return;
            
            const transform = window.getComputedStyle(pendulum).transform;
            const matrix = new DOMMatrix(transform);
            const angle = Math.round(Math.atan2(matrix.m12, matrix.m11) * (180/Math.PI));
            
            const direction = angle < 0 ? 'left' : 'right';
            
            if (direction !== lastDirection && !isAnimating) {
                updatePendulumText(direction);
                lastDirection = direction;
            }
            
            animationFrameId = requestAnimationFrame(animate);
        }

        // åœæ­¢åŠ¨ç”»å’ŒéŸ³æ•ˆ
        function stopAnimation() {
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
            pendulumActive = false;
            // åœæ­¢éŸ³æ•ˆ
            if (pendulumSound) {
                pendulumSound.pause();
                pendulumSound.currentTime = 0;
            }
        }

        // åªåœ¨é’Ÿæ‘†æˆ¿é—´æ¿€æ´»æ—¶å¯åŠ¨åŠ¨ç”»
        function startPendulum() {
            pendulumActive = true;
            lastDirection = 'left';
            isAnimating = false;
            currentMessageIndex = 0;
            initPendulumText();
            animate();
        }

        // é¡µé¢åˆå§‹åŒ–è®¾ç½®
        document.addEventListener('DOMContentLoaded', () => {
            // é’Ÿæ‘†é¡µé¢å¯¼èˆªå’Œåˆ‡æ¢æ§åˆ¶
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const targetRoom = item.dataset.room;
                    
                    // åœæ­¢é’Ÿæ‘†åŠ¨ç”»å’ŒéŸ³æ•ˆ
                    stopAnimation();
                    
                    // æ›´æ–°å¯¼èˆªçŠ¶æ€
                    document.querySelectorAll('.nav-item').forEach(nav => {
                        nav.classList.remove('active');
                    });
                    item.classList.add('active');
                    
                    // åˆ‡æ¢æˆ¿é—´
                    document.querySelectorAll('.room').forEach(room => {
                        room.classList.remove('active');
                        if (room.id === `${targetRoom}-room`) {
                            room.classList.add('active');
                            // å¦‚æœåˆ‡æ¢åˆ°é’Ÿæ‘†æˆ¿é—´ï¼Œå¯åŠ¨åŠ¨ç”»å’ŒéŸ³æ•ˆ
                            if (targetRoom === 'pendulum') {
                                startPendulum();
                            }
                        }
                    });
                });
            });

            // æƒ…ç»ªé€‰æ‹©ç³»ç»Ÿ
            document.querySelectorAll('.emotion-option').forEach(option => {
                option.addEventListener('click', () => {
                    const emotion = option.dataset.emotion;
                    currentMessageIndex = 0; // é‡ç½®ç´¢å¼•
                    // åˆ‡æ¢åˆ°é’Ÿæ‘†æˆ¿é—´
                    document.querySelector('.nav-item[data-room="pendulum"]').click();
                });
            });
        });

        // 3Då¯¼èˆªæ¨¡å‹
        const navModels = {
            infinity: {
                create: (scene) => {
                    const geometry = new THREE.TorusKnotGeometry(0.5, 0.2, 100, 16);
                    const material = new THREE.MeshPhongMaterial({
                        color: 0x4ECDC4,
                        shininess: 100,
                        wireframe: true
                    });
                    return new THREE.Mesh(geometry, material);
                }
            },
            bubble: {
                create: (scene) => {
                    const geometry = new THREE.SphereGeometry(0.5, 32, 32);
                    const material = new THREE.MeshPhongMaterial({
                        color: 0xFF6B6B,
                        transparent: true,
                        opacity: 0.8,
                        wireframe: true
                    });
                    return new THREE.Mesh(geometry, material);
                }
            },
            drawing: {
                create: (scene) => {
                    const geometry = new THREE.BoxGeometry(0.5, 0.5, 0.1);
                    const material = new THREE.MeshPhongMaterial({
                        color: 0xFF6B6B,
                        wireframe: true
                    });
                    return new THREE.Mesh(geometry, material);
                }
            },
            nails: {
                create: (scene) => {
                    const geometry = new THREE.OctahedronGeometry(0.5);
                    const material = new THREE.MeshPhongMaterial({
                        color: 0x4ECDC4,
                        wireframe: true
                    });
                    return new THREE.Mesh(geometry, material);
                }
            },
            emotion: {
                create: (scene) => {
                    const geometry = new THREE.DodecahedronGeometry(0.5);
                    const material = new THREE.MeshPhongMaterial({
                        color: 0xFF6B6B,
                        wireframe: true
                    });
                    return new THREE.Mesh(geometry, material);
                }
            },
            pendulum: {
                create: (scene) => {
                    const geometry = new THREE.TorusGeometry(0.5, 0.2, 16, 100);
                    const material = new THREE.MeshPhongMaterial({
                        color: 0x4ECDC4,
                        wireframe: true
                    });
                    return new THREE.Mesh(geometry, material);
                }
            }
        };

        // åˆå§‹åŒ–3Då¯¼èˆª
        function initNavModels() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                const canvas = item.querySelector('canvas');
                const room = item.dataset.room;
                
                // åˆ›å»ºåœºæ™¯
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({
                    canvas: canvas,
                    alpha: true,
                    antialias: true
                });
                renderer.setSize(60, 60);
                
                // æ·»åŠ å…‰æº
                const light = new THREE.PointLight(0xffffff, 1);
                light.position.set(1, 1, 1);
                scene.add(light);
                
                const ambientLight = new THREE.AmbientLight(0x404040);
                scene.add(ambientLight);
                
                // åˆ›å»ºæ¨¡å‹
                const model = navModels[room].create(scene);
                scene.add(model);
                
                camera.position.z = 2;
                
                // åŠ¨ç”»å¾ªç¯
                function animate() {
                    requestAnimationFrame(animate);
                    
                    model.rotation.x += 0.01;
                    model.rotation.y += 0.01;
                    
                    renderer.render(scene, camera);
                }
                
                animate();
                
                // æ·»åŠ äº¤äº’æ•ˆæœ
                item.addEventListener('mouseenter', () => {
                    gsap.to(model.rotation, {
                        x: model.rotation.x + Math.PI,
                        y: model.rotation.y + Math.PI,
                        duration: 1,
                        ease: "power2.inOut"
                    });
                });
            });
        }

        // ç»˜ç”»åŠŸèƒ½
        function initDrawingRoom() {
            const canvas = document.getElementById('drawing-canvas');
            const ctx = canvas.getContext('2d');
            const colorPicker = document.querySelector('.color-picker');
            const brushSize = document.querySelector('.brush-size');
            const clearBtn = document.getElementById('clear-btn');
            const saveBtn = document.getElementById('save-btn');
            
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            let savedCanvas = null;

            // è®¾ç½®ç”»å¸ƒå¤§å°
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                ctx.fillStyle = 'var(--background-dark)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }

            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // ç»˜ç”»äº‹ä»¶
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            function startDrawing(e) {
                isDrawing = true;
                [lastX, lastY] = [e.clientX, e.clientY];
            }

            function draw(e) {
                if (!isDrawing) return;
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(e.clientX, e.clientY);
                ctx.strokeStyle = colorPicker.value;
                ctx.lineWidth = brushSize.value;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.stroke();
                
                [lastX, lastY] = [e.clientX, e.clientY];
            }

            function stopDrawing() {
                isDrawing = false;
            }

            // æ¸…é™¤ç”»å¸ƒ
            clearBtn.addEventListener('click', () => {
                ctx.fillStyle = 'var(--background-dark)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            });

            // ä¿å­˜ç»˜ç”»
            saveBtn.addEventListener('click', () => {
                // åˆ›å»ºä¸´æ—¶ç”»å¸ƒä¿å­˜å½“å‰çŠ¶æ€
                savedCanvas = document.createElement('canvas');
                savedCanvas.width = canvas.width;
                savedCanvas.height = canvas.height;
                const savedCtx = savedCanvas.getContext('2d');
                savedCtx.drawImage(canvas, 0, 0);
                
                // æ˜¾ç¤ºä¿å­˜æˆåŠŸæç¤º
                const saveText = document.createElement('div');
                saveText.textContent = 'å·²ä¿å­˜';
                saveText.style.position = 'fixed';
                saveText.style.top = '20px';
                saveText.style.left = '50%';
                saveText.style.transform = 'translateX(-50%)';
                saveText.style.color = '#fff';
                saveText.style.padding = '10px 20px';
                saveText.style.background = 'rgba(0, 0, 0, 0.7)';
                saveText.style.borderRadius = '5px';
                saveText.style.zIndex = '1000';
                document.body.appendChild(saveText);
                
                // 2ç§’åç§»é™¤æç¤º
                setTimeout(() => {
                    document.body.removeChild(saveText);
                }, 2000);
            });
        }

        // åˆå§‹åŒ–
        initHomeModel();
        initNavModels();
        createBubbles();
        createImage();
        initDrawingRoom();

        // å“åº”çª—å£å¤§å°å˜åŒ–ï¼Œé‡æ–°åˆ›å»ºæ³¡æ³¡
        window.addEventListener('resize', () => {
            createBubbles();
        });

        // è§†é¢‘éŸ³é‡æ§åˆ¶
        const video = document.querySelector('.infinity-video');
        const volumeSlider = document.querySelector('.volume-slider');
        const volumeIcon = document.querySelector('.volume-icon');

        volumeSlider.addEventListener('input', (e) => {
            const volume = e.target.value;
            video.volume = volume;
            video.muted = volume === '0';
            volumeIcon.textContent = volume === '0' ? 'ğŸ”‡' : 'ğŸ”Š';
        });

        volumeIcon.addEventListener('click', () => {
            if (video.muted) {
                video.muted = false;
                video.volume = volumeSlider.value;
                volumeIcon.textContent = 'ğŸ”Š';
            } else {
                video.muted = true;
                volumeIcon.textContent = 'ğŸ”‡';
            }
        });

        // æ³¡æ³¡æ‚¬åœåŠ¨æ•ˆï¼šåŸåœ°æ‘†æ­£å¹¶è½»å¾®æ”¾å¤§ï¼Œç¦»å¼€æ¢å¤
        function enableBubbleHoverEffect() {
            document.querySelectorAll('.bubble').forEach(bubble => {
                bubble.addEventListener('mouseenter', function() {
                    gsap.to(bubble, {
                        scale: 1.12,
                        rotate: 0,
                        duration: 0.3,
                        ease: 'power2.out',
                        overwrite: 'auto'
                    });
                });
                bubble.addEventListener('mouseleave', function() {
                    // æ¢å¤ä¸ºGSAPåŠ¨ç”»çš„åŸå§‹scaleå’Œrotate
                    const current = bubble.style.getPropertyValue('--rotation') || '0deg';
                    const rotation = parseFloat(current);
                    gsap.to(bubble, {
                        scale: 1,
                        rotate: rotation,
                        duration: 0.3,
                        ease: 'power2.in',
                        overwrite: 'auto'
                    });
                });
            });
        }
        // æ¯æ¬¡åˆ›å»ºæ³¡æ³¡åè°ƒç”¨
        // ...åœ¨createMainBubblesæœ€åä¸€è¡ŒåŠ ï¼šenableBubbleHoverEffect();

        // æƒ…ç»ªæˆ¿é—´å¯¹è¯ç³»ç»Ÿ
        function initEmotionDialog() {
            const dialogContainers = document.querySelectorAll('.emotion-dialog-container');
            const dialogOptions = document.querySelectorAll('.dialog-option');
            const backButtons = document.querySelectorAll('.back-button');
            const soundReal = document.getElementById('emotion-sound-real');
            const soundMask = document.getElementById('emotion-sound-mask');
            
            // è¾…åŠ©å‡½æ•°ï¼šæ˜¾ç¤ºæŒ‡å®šå¯¹è¯æ¡†
            function showDialog(dialog) {
                if (dialog) {
                    dialog.classList.add('active');
                    setTimeout(() => {
                        dialog.style.opacity = '1';
                        dialog.style.transform = 'translateY(0)';
                    }, 10);
                }
            }
            
            // å…¨å±åŒ–å¯¹è¯æ¡†å¹¶ä½¿å…¶ä¸èƒŒæ™¯å®Œå…¨èåˆ
            const emotionDialog = document.getElementById('emotionDialog');
            emotionDialog.style.width = '100%';
            emotionDialog.style.height = '100%';
            emotionDialog.style.maxWidth = 'none';
            emotionDialog.style.borderRadius = '0';
            emotionDialog.style.border = 'none';
            emotionDialog.style.boxShadow = 'none';
            emotionDialog.style.background = 'transparent';
            emotionDialog.style.backdropFilter = 'none';
            
            // ç¡®ä¿å¯¹è¯æ¡†å†…å®¹ä»ä¿æŒç¾è§‚å¸ƒå±€
            document.querySelectorAll('.dialog-header, .dialog-content, .dialog-options').forEach(el => {
                el.style.maxWidth = '1200px';
                el.style.margin = '0 auto';
                el.style.background = 'transparent';
                el.style.width = '100%';
            });
            
            // ç»“æœæ•°æ®
            const results = {
                'workplace-real': {
                    title: 'çœŸå®è¡¨è¾¾',
                    description: 'ä½ é€‰æ‹©äº†åšæŒå·±è§ï¼Œè¡¨è¾¾äº†çœŸå®æƒ…ç»ªã€‚è™½ç„¶è¿™å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›å†²çªï¼Œä½†å¦è¯šè¡¨è¾¾è‡ªå·±çš„ç–²æƒ«å’Œä¸æ»¡ï¼Œæœ‰åŠ©äºå»ºç«‹æ›´å¥åº·çš„å›¢é˜Ÿå…³ç³»ã€‚é€‚åº¦çš„è¡¨è¾¾èƒ½å¤Ÿå¸®åŠ©ä»–äººç†è§£ä½ çš„å¤„å¢ƒï¼Œé¿å…è¿‡åº¦æ¶ˆè€—ã€‚',
                    animation: 'animation-workplace-real',
                    sound: soundReal
                },
                'workplace-mask': {
                    title: 'æƒ…ç»ªéšè—',
                    description: 'ä½ é€‰æ‹©äº†ç¬‘ç€ç­”åº”ï¼Œç§¯æé…åˆã€‚è¿™ç§åº”å¯¹æ–¹å¼è™½ç„¶ç»´æŒäº†è¡¨é¢å’Œè°ï¼Œä½†é•¿æœŸå‹æŠ‘è‡ªå·±çš„çœŸå®æ„Ÿå—å¯èƒ½ä¼šå¯¼è‡´æ›´å¤§çš„æƒ…ç»ªçˆ†å‘ã€‚å»ºè®®åœ¨é€‚å½“çš„æ—¶å€™ï¼Œä»¥å»ºè®¾æ€§çš„æ–¹å¼è¡¨è¾¾ä½ çš„æƒ³æ³•å’Œéœ€æ±‚ã€‚',
                    animation: 'animation-workplace-mask',
                    sound: soundMask
                },
                'relationship-real': {
                    title: 'å¦è¯šæ²Ÿé€š',
                    description: 'ä½ é€‰æ‹©äº†å½“åœºæŒ‡å‡ºé—®é¢˜ã€‚è¿™ç§ç›´æ¥è¡¨è¾¾çš„æ–¹å¼è™½ç„¶å¯èƒ½å¸¦æ¥ä¸€æ—¶çš„å°´å°¬ï¼Œä½†æœ‰åŠ©äºç»´æŠ¤å…¬å¹³æ­£ä¹‰ï¼Œä¹Ÿèƒ½è®©ç»„å‘˜è®¤è¯†åˆ°è‡ªå·±çš„é—®é¢˜ã€‚é€‚åº¦çš„è¡¨è¾¾ä¸æ»¡æ˜¯ç»´æŠ¤è‡ªå·±æƒç›Šçš„é‡è¦æ–¹å¼ã€‚',
                    animation: 'animation-relationship-real',
                    sound: soundReal
                },
                'relationship-mask': {
                    title: 'æƒ…ç»ªå‹æŠ‘',
                    description: 'ä½ é€‰æ‹©äº†å¾®ç¬‘é¼“æŒï¼Œä¿æŒæ²‰é»˜ã€‚è™½ç„¶é¿å…äº†ç›´æ¥å†²çªï¼Œä½†è¿™ç§å‹æŠ‘å¯èƒ½ä¼šå½±å“ä½ çš„å¿ƒç†å¥åº·ã€‚è®°ä½ï¼Œç»´æŠ¤è‡ªå·±çš„åŠ³åŠ¨æˆæœæ˜¯æ­£å½“çš„ï¼Œé€‚åº¦çš„è¡¨è¾¾ä¸æ»¡å¹¶ä¸ä¼šç ´åäººé™…å…³ç³»ã€‚',
                    animation: 'animation-relationship-mask',
                    sound: soundMask
                },
                'dorm-real': {
                    title: 'ç›´æ¥è¡¨è¾¾',
                    description: 'ä½ é€‰æ‹©äº†ç›´æ¥è¡¨è¾¾ä¸æ»¡ã€‚è™½ç„¶è¿™ç§æ–¹å¼å¯èƒ½ä¼šå¼•èµ·ä¸€äº›å†²çªï¼Œä½†æ˜ç¡®è¡¨è¾¾è‡ªå·±çš„éœ€æ±‚å’Œç•Œé™æ˜¯ç»´æŠ¤è‰¯å¥½å®¿èˆå…³ç³»çš„é‡è¦æ–¹å¼ã€‚é€‚åº¦çš„è¡¨è¾¾ä¸æ»¡æœ‰åŠ©äºå»ºç«‹ç›¸äº’å°Šé‡çš„å®¿èˆæ°›å›´ã€‚',
                    animation: 'animation-dorm-real',
                    sound: soundReal
                },
                'dorm-mask': {
                    title: 'æ¸©å’Œå¤„ç†',
                    description: 'ä½ é€‰æ‹©äº†è½»å£°æé†’ï¼Œä¿æŒå¹³å’Œã€‚è¿™ç§æ¸©å’Œçš„æ–¹å¼è™½ç„¶é¿å…äº†ç›´æ¥å†²çªï¼Œä½†é•¿æœŸå‹æŠ‘è‡ªå·±çš„æ„Ÿå—å¯èƒ½ä¼šå½±å“å¿ƒç†å¥åº·ã€‚å»ºè®®åœ¨é€‚å½“çš„æ—¶å€™ï¼Œä»¥å»ºè®¾æ€§çš„æ–¹å¼è¡¨è¾¾ä½ çš„æƒ³æ³•å’Œéœ€æ±‚ã€‚',
                    animation: 'animation-dorm-mask',
                    sound: soundMask
                }
            };
            
            // æ¸…ç†æ‰€æœ‰åŠ¨ç”»ç›¸å…³çš„è®¡æ—¶å™¨å’Œé‡ç½®åŠ¨ç”»å…ƒç´ çŠ¶æ€
            function clearAllAnimationTimers() {
                const animationElement = document.getElementById('result-animation');
                if (animationElement) {
                    // æ¸…ç†ç²’å­ç”Ÿæˆçš„intervals
                    if (animationElement.dataset.intervalId) {
                        clearInterval(parseInt(animationElement.dataset.intervalId));
                        delete animationElement.dataset.intervalId;
                    }
                    
                    // æ¸…ç†åœ†å½¢å±‚çš„intervals
                    const circleLayer = animationElement.querySelector('.circle-layer');
                    if (circleLayer && circleLayer.dataset.intervalId) {
                        clearInterval(parseInt(circleLayer.dataset.intervalId));
                        delete circleLayer.dataset.intervalId;
                    }
                    
                    // é‡ç½®åŠ¨ç”»å…ƒç´ çš„ç±»åå’Œå¯è§æ€§çŠ¶æ€
                    animationElement.className = 'result-animation';
                    
                    // æ·¡å‡ºåŠ¨ç”»æ•ˆæœ
                    animationElement.style.opacity = '0';
                    
                    // å»¶è¿Ÿåå®Œå…¨éšè—ï¼Œä»¥ç¡®ä¿æ·¡å‡ºåŠ¨ç”»å®Œæˆ
                    setTimeout(() => {
                        animationElement.style.visibility = 'hidden';
                    }, 1000);
                }
            }
            
            // åœºæ™¯é€‰æ‹©å¤„ç†
            dialogOptions.forEach(option => {
                // ç§»é™¤å·²æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œé˜²æ­¢é‡å¤ç»‘å®š
                option.removeEventListener('click', handleDialogOptionClick);
                // æ·»åŠ æ–°çš„äº‹ä»¶ç›‘å¬å™¨
                option.addEventListener('click', handleDialogOptionClick);
            });
            
            // å¤„ç†å¯¹è¯é€‰é¡¹ç‚¹å‡»çš„å‡½æ•°
            function handleDialogOptionClick() {
                console.log('é€‰é¡¹ç‚¹å‡»:', this.dataset);
                
                // æ·»åŠ é€‰ä¸­æ•ˆæœ
                this.classList.add('selected');
                
                // æ·»åŠ ç‚¹å‡»æ³¢çº¹æ•ˆæœ
                const ripple = document.createElement('div');
                ripple.classList.add('ripple');
                this.appendChild(ripple);
                
                ripple.style.left = '50%';
                ripple.style.top = '50%';
                
                ripple.style.animation = 'ripple 0.6s linear';
                setTimeout(() => ripple.remove(), 700);
                
                // æ ¹æ®ä¸åŒç±»å‹çš„é€‰é¡¹æ‰§è¡Œä¸åŒæ“ä½œ
                if (this.dataset.scenario) {
                    // æ˜¯åœºæ™¯é€‰æ‹©ï¼Œæ˜¾ç¤ºå¯¹åº”åœºæ™¯
                    const targetDialog = document.getElementById(`${this.dataset.scenario}Dialog`);
                    
                    // æ·¡å‡ºå½“å‰å¯¹è¯æ¡†
                    fadeOutCurrentDialog(() => {
                        // æ·¡å…¥ç›®æ ‡å¯¹è¯æ¡†
                        showDialog(targetDialog);
                    });
                } else if (this.dataset.result) {
                    // æ˜¯ç»“æœé€‰æ‹©ï¼Œæ˜¾ç¤ºç»“æœ
                    const result = results[this.dataset.result];
                    console.log('é€‰æ‹©çš„ç»“æœ:', this.dataset.result, result);
                    
                    // è®¾ç½®ç»“æœå†…å®¹
                    document.getElementById('result-title').textContent = result.title;
                    document.getElementById('result-description').textContent = result.description;
                    
                    // è·å–åŠ¨ç”»å…ƒç´ å¼•ç”¨
                    const animationElement = document.getElementById('result-animation');
                    console.log('åŠ¨ç”»å…ƒç´ :', animationElement);
                    
                    // é‡ç½®åŠ¨ç”»å…ƒç´ çš„ç±»åï¼Œåªä¿ç•™åŸºæœ¬ç±»
                    animationElement.className = 'result-animation';
                    
                    // æ·¡å‡ºå½“å‰å¯¹è¯æ¡†
                    fadeOutCurrentDialog(() => {
                        // æ·¡å…¥ç»“æœå¯¹è¯æ¡†
                        showDialog(document.getElementById('resultDialog'));
                        
                        // æ¸…ç†ä¹‹å‰çš„åŠ¨ç”»è®¡æ—¶å™¨
                        clearAllAnimationTimers();
                        
                        // å…ˆç¡®ä¿åŠ¨ç”»å…ƒç´ å¯è§
                        animationElement.style.visibility = 'visible';
                        
                        // å¯åŠ¨åŠ¨ç”»å’ŒéŸ³æ•ˆ
                        setTimeout(() => {
                            // åˆ›å»ºé«˜çº§åŠ¨ç”»æ•ˆæœ
                            createEmotionAnimationEffects(this.dataset.result);
                            
                            // æ·»åŠ æ¿€æ´»ç±»ä½¿å…¶å¯è§
                            animationElement.classList.add('active');
                            
                            // æ’­æ”¾éŸ³æ•ˆ
                            if (result.sound) {
                                result.sound.currentTime = 0;
                                result.sound.play().catch(e => {
                                    console.log("éŸ³æ•ˆæ’­æ”¾å¤±è´¥:", e);
                                });
                            }
                        }, 100);
                    });
                } else if (this.dataset.target) {
                    // æ˜¯å¯¼èˆªé€‰é¡¹ï¼Œæ˜¾ç¤ºç›®æ ‡å¯¹è¯æ¡†
                    const targetDialog = document.getElementById(this.dataset.target);
                    
                    // æ¸…ç†åŠ¨ç”»è®¡æ—¶å™¨
                    clearAllAnimationTimers();
                    
                    // æ·¡å‡ºå½“å‰å¯¹è¯æ¡†
                    fadeOutCurrentDialog(() => {
                        // æ·¡å…¥ç›®æ ‡å¯¹è¯æ¡†
                        showDialog(targetDialog);
                        
                        // é‡ç½®æ‰€æœ‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
                        dialogOptions.forEach(opt => {
                            opt.classList.remove('selected');
                        });
                    });
                }
            }
            
            // è¿”å›æŒ‰é’®å¤„ç†
            backButtons.forEach(button => {
                // ç§»é™¤å·²æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ï¼Œé˜²æ­¢é‡å¤ç»‘å®š
                button.removeEventListener('click', handleBackButtonClick);
                // æ·»åŠ æ–°çš„äº‹ä»¶ç›‘å¬å™¨
                button.addEventListener('click', handleBackButtonClick);
            });
            
            // å¤„ç†è¿”å›æŒ‰é’®ç‚¹å‡»çš„å‡½æ•°
            function handleBackButtonClick() {
                const targetDialog = document.getElementById(this.dataset.target);
                
                // æ¸…ç†åŠ¨ç”»è®¡æ—¶å™¨
                clearAllAnimationTimers();
                
                // æ·¡å‡ºå½“å‰å¯¹è¯æ¡†
                fadeOutCurrentDialog(() => {
                    // æ·¡å…¥ç›®æ ‡å¯¹è¯æ¡†
                    showDialog(targetDialog);
                    
                    // é‡ç½®æ‰€æœ‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
                    dialogOptions.forEach(option => {
                        option.classList.remove('selected');
                    });
                });
            }
            
            // è¾…åŠ©å‡½æ•°ï¼šæ·¡å‡ºå½“å‰æ¿€æ´»çš„å¯¹è¯æ¡†
            function fadeOutCurrentDialog(callback) {
                const activeDialog = document.querySelector('.emotion-dialog-container.active');
                if (activeDialog) {
                    activeDialog.style.opacity = '0';
                    activeDialog.style.transform = 'translateY(20px)';
                    
                    setTimeout(() => {
                        activeDialog.classList.remove('active');
                        if (callback) callback();
                    }, 300);
                } else {
                    if (callback) callback();
                }
            }
        }

        // ä¸ºæƒ…ç»ªåŠ¨ç”»åˆ›å»ºé«˜çº§æ•ˆæœ
        function createEmotionAnimationEffects(resultType) {
            const animationElement = document.getElementById('result-animation');
            if (!animationElement) {
                console.error('åŠ¨ç”»å…ƒç´ ä¸å­˜åœ¨!');
                return;
            }
            
            console.log('åˆ›å»ºåŠ¨ç”»æ•ˆæœ:', resultType);
            
            // æ¸…é™¤ä¹‹å‰çš„åŠ¨æ€å…ƒç´ 
            animationElement.innerHTML = '';
            
            // ç¡®ä¿ä½¿ç”¨ä¸€è‡´çš„ç±»å
            if (results[resultType] && results[resultType].animation) {
                animationElement.classList.add(results[resultType].animation);
            }
            
            // æ ¹æ®ä¸åŒç»“æœç±»å‹åˆ›å»ºä¸åŒæ•ˆæœ
            switch (resultType) {
                case 'workplace-real':
                    // æ·»åŠ ç²’å­å±‚
                    const particleLayer = document.createElement('div');
                    particleLayer.className = 'particle-layer';
                    animationElement.appendChild(particleLayer);
                    
                    // æ·»åŠ éšæœºæ¼‚æµ®çš„å°æ–¹å—
                    for (let i = 0; i < 20; i++) {
                        createFloatingSquare(animationElement);
                    }
                    break;
                    
                case 'workplace-mask':
                    // æ·»åŠ æ³¢æµªå±‚
                    const waveLayer = document.createElement('div');
                    waveLayer.className = 'wave-layer';
                    animationElement.appendChild(waveLayer);
                    
                    // åˆ›å»ºå¤šå±‚æ³¢æµª
                    for (let i = 0; i < 3; i++) {
                        const additionalWave = document.createElement('div');
                        additionalWave.className = 'wave-layer';
                        additionalWave.style.opacity = `${0.3 - i * 0.05}`;
                        additionalWave.style.animationDelay = `${i * 1.5}s`;
                        additionalWave.style.transform = `scale(${1.5 + i * 0.5})`;
                        animationElement.appendChild(additionalWave);
                    }
                    break;
                    
                case 'relationship-real':
                    // æ·»åŠ åœ†å½¢å±‚
                    const circleLayer = document.createElement('div');
                    circleLayer.className = 'circle-layer';
                    animationElement.appendChild(circleLayer);
                    
                    // åŠ¨æ€åˆ›å»ºæ‰©æ•£åœ†
                    createExpandingCircles(circleLayer);
                    break;
                    
                case 'relationship-mask':
                    // æ·»åŠ æ‰«æå±‚
                    for (let i = 0; i < 3; i++) {
                        const scanLayer = document.createElement('div');
                        scanLayer.className = 'scan-layer';
                        scanLayer.style.animationDelay = `${i * 1.3}s`;
                        animationElement.appendChild(scanLayer);
                    }
                    break;
                    
                case 'dorm-real':
                    // æ·»åŠ ç²’å­æ•ˆæœ
                    for (let i = 0; i < 25; i++) {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        particle.style.width = `${5 + Math.random() * 10}px`;
                        particle.style.height = particle.style.width;
                        particle.style.backgroundColor = 'rgba(255, 255, 255, 0.3)';
                        particle.style.left = `${Math.random() * 100}%`;
                        particle.style.bottom = '0';
                        particle.style.animationDuration = `${5 + Math.random() * 5}s`;
                        particle.style.animationDelay = `${Math.random() * 2}s`;
                        animationElement.appendChild(particle);
                    }
                    break;
                    
                case 'dorm-mask':
                    // æ·»åŠ æ³¢çº¹æ•ˆæœ
                    for (let i = 0; i < 3; i++) {
                        const ripple = document.createElement('div');
                        ripple.style.position = 'absolute';
                        ripple.style.width = '100%';
                        ripple.style.height = '100%';
                        ripple.style.top = '0';
                        ripple.style.left = '0';
                        ripple.style.border = `${i + 1}px solid rgba(255, 255, 255, 0.2)`;
                        ripple.style.borderRadius = '50%';
                        ripple.style.transform = 'scale(0)';
                        ripple.style.opacity = '1';
                        ripple.style.animation = `ripple ${5 + i}s ease-out infinite`;
                        ripple.style.animationDelay = `${i * 0.5}s`;
                        animationElement.appendChild(ripple);
                    }
                    break;
                    
                default:
                    console.warn('æœªçŸ¥çš„ç»“æœç±»å‹:', resultType);
                    break;
            }
            
            // å¼ºåˆ¶é‡ç»˜
            animationElement.offsetHeight;
        }

        // æ¸…ç†æ‰€æœ‰åŠ¨ç”»ç›¸å…³çš„è®¡æ—¶å™¨å’Œé‡ç½®åŠ¨ç”»å…ƒç´ çŠ¶æ€
        function clearAllAnimationTimers() {
            const animationElement = document.getElementById('result-animation');
            if (!animationElement) return;
            
            // æ¸…ç†ç²’å­ç”Ÿæˆçš„intervals
            if (animationElement.dataset.intervalId) {
                clearInterval(parseInt(animationElement.dataset.intervalId));
                delete animationElement.dataset.intervalId;
            }
            
            // æ¸…ç†åœ†å½¢å±‚çš„intervals
            const circleLayer = animationElement.querySelector('.circle-layer');
            if (circleLayer && circleLayer.dataset.intervalId) {
                clearInterval(parseInt(circleLayer.dataset.intervalId));
                delete circleLayer.dataset.intervalId;
            }
            
            // é‡ç½®åŠ¨ç”»å…ƒç´ çš„ç±»åå’Œå¯è§æ€§çŠ¶æ€
            animationElement.className = 'result-animation';
            animationElement.style.opacity = '0';
            animationElement.style.visibility = 'hidden';
            
            // æ¸…é™¤å†…å®¹
            animationElement.innerHTML = '';
        }

        // åˆ›å»ºéšæœºæ¼‚æµ®çš„å°æ–¹å—
        function createFloatingSquare(container) {
            const square = document.createElement('div');
            const size = Math.random() * 10 + 5;
            const posX = Math.random() * 100;
            const delay = Math.random() * 5;
            const duration = Math.random() * 10 + 10;
            
            square.style.position = 'absolute';
            square.style.width = `${size}px`;
            square.style.height = `${size}px`;
            square.style.background = 'rgba(255, 255, 255, 0.2)';
            square.style.left = `${posX}%`;
            square.style.bottom = '0';
            square.style.animation = `floatUp ${duration}s ease-in infinite`;
            square.style.animationDelay = `${delay}s`;
            square.style.transform = `rotate(${Math.random() * 360}deg)`;
            
            container.appendChild(square);
        }

        // åŠ¨æ€åˆ›å»ºæ‰©æ•£åœ†
        function createExpandingCircles(container) {
            const createCircle = () => {
                const circle = document.createElement('div');
                circle.className = 'circle';
                
                const size = Math.max(window.innerWidth, window.innerHeight) * 0.3;
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;
                
                circle.style.width = `${size}px`;
                circle.style.height = `${size}px`;
                circle.style.left = `${x}px`;
                circle.style.top = `${y}px`;
                circle.style.animationDuration = `${3 + Math.random() * 2}s`;
                
                container.appendChild(circle);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤
                setTimeout(() => {
                    if (circle.parentNode === container) {
                        container.removeChild(circle);
                    }
                }, 5000);
            };
            
            // ç«‹å³åˆ›å»ºä¸€äº›åœ†
            for (let i = 0; i < 5; i++) {
                setTimeout(() => createCircle(), i * 300);
            }
            
            // æŒç»­åˆ›å»ºæ–°åœ†
            const intervalId = setInterval(createCircle, 1000);
            
            // å­˜å‚¨intervalIdä»¥ä¾¿æ¸…ç†
            container.dataset.intervalId = intervalId;
        }

        // æ·»åŠ é¢å¤–çš„åŠ¨ç”»å…³é”®å¸§
        const styleSheet = document.createElement('style');
        styleSheet.innerHTML = `
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.7; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        @keyframes shrinkCircle {
            0% { width: 300vw; height: 300vh; opacity: 0.8; }
            100% { width: 0; height: 0; opacity: 0; }
        }

        @keyframes ripple {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }
        `;
        document.head.appendChild(styleSheet);

        // åˆå§‹åŒ–åŠŸèƒ½ä»£ç é›†ä¸­è°ƒç”¨
        function initAllRooms() {
            // åˆå§‹åŒ–å¯¼èˆªæ 
            initNavModels();
            
            // åˆå§‹åŒ–å„ä¸ªæˆ¿é—´çš„åŠŸèƒ½
            initHomeModel();
            createBubbles();
            createImage();
            initEmotionDialog(); // ç¡®ä¿è°ƒç”¨æƒ…ç»ªæˆ¿é—´åˆå§‹åŒ–
            initDrawingRoom();
        }

        // é¡µé¢åŠ è½½åæ‰§è¡Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initAllRooms);
    </script>
</body>
</html>